module.exports=[33405,(t,e,n)=>{e.exports=t.x("child_process",()=>require("child_process"))},46786,(t,e,n)=>{e.exports=t.x("os",()=>require("os"))},22734,(t,e,n)=>{e.exports=t.x("fs",()=>require("fs"))},29507,(t,e,n)=>{e.exports=o,o.sync=function(t,e){return i(r.statSync(t),t,e)};var r=t.r(22734);function i(t,e,n){if(!t.isSymbolicLink()&&!t.isFile())return!1;var r=void 0!==n.pathExt?n.pathExt:process.env.PATHEXT;if(!r||-1!==(r=r.split(";")).indexOf(""))return!0;for(var i=0;i<r.length;i++){var o=r[i].toLowerCase();if(o&&e.substr(-o.length).toLowerCase()===o)return!0}return!1}function o(t,e,n){r.stat(t,function(r,o){n(r,!r&&i(o,t,e))})}},24214,(t,e,n)=>{var r;function i(t,e,n){if("function"==typeof e&&(n=e,e={}),!n){if("function"!=typeof Promise)throw TypeError("callback not provided");return new Promise(function(n,r){i(t,e||{},function(t,e){t?r(t):n(e)})})}r(t,e||{},function(t,r){t&&("EACCES"===t.code||e&&e.ignoreErrors)&&(t=null,r=!1),n(t,r)})}t.r(22734),r=t.r(29507),e.exports=i,i.sync=function(t,e){try{return r.sync(t,e||{})}catch(t){if(e&&e.ignoreErrors||"EACCES"===t.code)return!1;throw t}}},19932,(t,e,n)=>{e.exports=s,s.sync=function(t,e){for(var n=a(t,e=e||{}),r=n.env,s=n.ext,c=n.extExe,l=[],f=0,p=r.length;f<p;f++){var h=r[f];'"'===h.charAt(0)&&'"'===h.slice(-1)&&(h=h.slice(1,-1));var d=i.join(h,t);!h&&/^\.[\\\/]/.test(t)&&(d=t.slice(0,2)+d);for(var m=0,v=s.length;m<v;m++){var g=d+s[m];try{if(o.sync(g,{pathExt:c}))if(!e.all)return g;else l.push(g)}catch(t){}}}if(e.all&&l.length)return l;if(e.nothrow)return null;throw u(t)};var r="win32"===process.platform||"cygwin"===process.env.OSTYPE||"msys"===process.env.OSTYPE,i=t.r(14747),o=t.r(24214);function u(t){var e=Error("not found: "+t);return e.code="ENOENT",e}function a(t,e){var n=e.colon||";",i=e.path||process.env.PATH||"",o=[""];i=i.split(n);var u="";return i.unshift(process.cwd()),o=(u=e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM").split(n),-1!==t.indexOf(".")&&""!==o[0]&&o.unshift(""),(t.match(/\//)||r&&t.match(/\\/))&&(i=[""]),{env:i,ext:o,extExe:u}}function s(t,e,n){"function"==typeof e&&(n=e,e={});var r=a(t,e),s=r.env,c=r.ext,l=r.extExe,f=[];!function r(a,p){if(a===p)if(e.all&&f.length)return n(null,f);else return n(u(t));var h=s[a];'"'===h.charAt(0)&&'"'===h.slice(-1)&&(h=h.slice(1,-1));var d=i.join(h,t);!h&&/^\.[\\\/]/.test(t)&&(d=t.slice(0,2)+d),function t(i,u){if(i===u)return r(a+1,p);var s=c[i];o(d+s,{pathExt:l},function(r,o){if(!r&&o)if(!e.all)return n(null,d+s);else f.push(d+s);return t(i+1,u)})}(0,c.length)}(0,s.length)}},95578,(t,e,n)=>{"use strict";t.r(33405).exec;var r=t.r(46786).platform().match(/win(32|64)/),i=t.r(19932),o=/\r\n|\r|\n/g,u=/^\[?(.*?)\]?$/,a=/[,]/,s={},c=e.exports={isWindows:r,streamRegexp:u,copy:function(t,e){Object.keys(t).forEach(function(n){e[n]=t[n]})},args:function(){var t=[],e=function(){t=1==arguments.length&&Array.isArray(arguments[0])?t.concat(arguments[0]):t.concat([].slice.call(arguments))};return e.clear=function(){t=[]},e.get=function(){return t},e.find=function(e,n){var r=t.indexOf(e);if(-1!==r)return t.slice(r+1,r+1+(n||0))},e.remove=function(e,n){var r=t.indexOf(e);-1!==r&&t.splice(r,(n||0)+1)},e.clone=function(){var e=c.args();return e(t),e},e},makeFilterStrings:function(t){return t.map(function(t){if("string"==typeof t)return t;var e="";return Array.isArray(t.inputs)?e+=t.inputs.map(function(t){return t.replace(u,"[$1]")}).join(""):"string"==typeof t.inputs&&(e+=t.inputs.replace(u,"[$1]")),e+=t.filter,t.options&&("string"==typeof t.options||"number"==typeof t.options?e+="="+t.options:Array.isArray(t.options)?e+="="+t.options.map(function(t){return"string"==typeof t&&t.match(a)?"'"+t+"'":t}).join(":"):Object.keys(t.options).length&&(e+="="+Object.keys(t.options).map(function(e){var n=t.options[e];return"string"==typeof n&&n.match(a)&&(n="'"+n+"'"),e+"="+n}).join(":"))),Array.isArray(t.outputs)?e+=t.outputs.map(function(t){return t.replace(u,"[$1]")}).join(""):"string"==typeof t.outputs&&(e+=t.outputs.replace(u,"[$1]")),e})},which:function(t,e){if(t in s)return e(null,s[t]);i(t,function(n,r){if(n)return e(null,s[t]="");e(null,s[t]=r)})},timemarkToSeconds:function(t){if("number"==typeof t)return t;if(-1===t.indexOf(":")&&t.indexOf(".")>=0)return Number(t);var e=t.split(":"),n=Number(e.pop());return e.length&&(n+=60*Number(e.pop())),e.length&&(n+=3600*Number(e.pop())),n},extractCodecData:function(t,e,n){"inputStack"in n||(n.inputStack=[],n.inputIndex=-1,n.inInput=!1);var r,i,o,u,a=n.inputStack,s=n.inputIndex,c=n.inInput;if(r=e.match(/Input #[0-9]+, ([^ ]+),/))c=n.inInput=!0,a[s=n.inputIndex=n.inputIndex+1]={format:r[1],audio:"",video:"",duration:""};else if(c&&(i=e.match(/Duration\: ([^,]+)/)))a[s].duration=i[1];else if(c&&(o=e.match(/Audio\: (.*)/)))o=o[1].split(", "),a[s].audio=o[0],a[s].audio_details=o;else if(c&&(u=e.match(/Video\: (.*)/)))u=u[1].split(", "),a[s].video=u[0],a[s].video_details=u;else if(/Output #\d+/.test(e))c=n.inInput=!1;else if(/Stream mapping:|Press (\[q\]|ctrl-c) to stop/.test(e))return t.emit.apply(t,["codecData"].concat(a)),!0;return!1},extractProgress:function(t,e){var n=function(t){for(var e={},n=(t=t.replace(/=\s+/g,"=").trim()).split(" "),r=0;r<n.length;r++){var i=n[r].split("=",2),o=i[0],u=i[1];if(void 0===u)return null;e[o]=u}return e}(e);if(n){var r={frames:parseInt(n.frame,10),currentFps:parseInt(n.fps,10),currentKbps:n.bitrate?parseFloat(n.bitrate.replace("kbits/s","")):0,targetSize:parseInt(n.size||n.Lsize,10),timemark:n.time};if(t._ffprobeData&&t._ffprobeData.format&&t._ffprobeData.format.duration){var i=Number(t._ffprobeData.format.duration);isNaN(i)||(r.percent=c.timemarkToSeconds(r.timemark)/i*100)}t.emit("progress",r)}},extractError:function(t){return t.split(o).reduce(function(t,e){return" "===e.charAt(0)||"["===e.charAt(0)?[]:(t.push(e),t)},[]).join("\n")},linesRing:function(t){var e=[],n=[],r=null,i=!1,u=t-1;function a(t){e.forEach(function(e){e(t)})}return{callback:function(t){n.forEach(function(e){t(e)}),e.push(t)},append:function(t){if(!i&&(t instanceof Buffer&&(t=""+t),t&&0!==t.length)){var e=t.split(o);1===e.length?null!==r?r+=e.shift():r=e.shift():(null!==r&&(a(r+=e.shift()),n.push(r)),r=e.pop(),e.forEach(function(t){a(t),n.push(t)}),u>-1&&n.length>u&&n.splice(0,n.length-u))}},get:function(){return null!==r?n.concat([r]).join("\n"):n.join("\n")},close:function(){i||(null!==r&&(a(r),n.push(r),u>-1&&n.length>u&&n.shift(),r=null),i=!0)}}}}},69443,(t,e,n)=>{"use strict";var r=t.r(95578);e.exports=function(t){t.mergeAdd=t.addInput=t.input=function(t){var e=!1,n=!1;if("string"!=typeof t){if(!("readable"in t)||!t.readable)throw Error("Invalid input");if(this._inputs.some(function(t){return t.isStream}))throw Error("Only one input stream is supported");n=!0,t.pause()}else{var i=t.match(/^([a-z]{2,}):/i);e=!i||"file"===i[0]}return this._inputs.push(this._currentInput={source:t,isFile:e,isStream:n,options:r.args()}),this},t.withInputFormat=t.inputFormat=t.fromFormat=function(t){if(!this._currentInput)throw Error("No input specified");return this._currentInput.options("-f",t),this},t.withInputFps=t.withInputFPS=t.withFpsInput=t.withFPSInput=t.inputFPS=t.inputFps=t.fpsInput=t.FPSInput=function(t){if(!this._currentInput)throw Error("No input specified");return this._currentInput.options("-r",t),this},t.nativeFramerate=t.withNativeFramerate=t.native=function(){if(!this._currentInput)throw Error("No input specified");return this._currentInput.options("-re"),this},t.setStartTime=t.seekInput=function(t){if(!this._currentInput)throw Error("No input specified");return this._currentInput.options("-ss",t),this},t.loop=function(t){if(!this._currentInput)throw Error("No input specified");return this._currentInput.options("-loop","1"),void 0!==t&&this.duration(t),this}}},41822,(t,e,n)=>{"use strict";var r=t.r(95578);e.exports=function(t){t.withNoAudio=t.noAudio=function(){return this._currentOutput.audio.clear(),this._currentOutput.audioFilters.clear(),this._currentOutput.audio("-an"),this},t.withAudioCodec=t.audioCodec=function(t){return this._currentOutput.audio("-acodec",t),this},t.withAudioBitrate=t.audioBitrate=function(t){return this._currentOutput.audio("-b:a",(""+t).replace(/k?$/,"k")),this},t.withAudioChannels=t.audioChannels=function(t){return this._currentOutput.audio("-ac",t),this},t.withAudioFrequency=t.audioFrequency=function(t){return this._currentOutput.audio("-ar",t),this},t.withAudioQuality=t.audioQuality=function(t){return this._currentOutput.audio("-aq",t),this},t.withAudioFilter=t.withAudioFilters=t.audioFilter=t.audioFilters=function(t){return arguments.length>1&&(t=[].slice.call(arguments)),Array.isArray(t)||(t=[t]),this._currentOutput.audioFilters(r.makeFilterStrings(t)),this}}},14491,(t,e,n)=>{"use strict";var r=t.r(95578);e.exports=function(t){t.withNoVideo=t.noVideo=function(){return this._currentOutput.video.clear(),this._currentOutput.videoFilters.clear(),this._currentOutput.video("-vn"),this},t.withVideoCodec=t.videoCodec=function(t){return this._currentOutput.video("-vcodec",t),this},t.withVideoBitrate=t.videoBitrate=function(t,e){return t=(""+t).replace(/k?$/,"k"),this._currentOutput.video("-b:v",t),e&&this._currentOutput.video("-maxrate",t,"-minrate",t,"-bufsize","3M"),this},t.withVideoFilter=t.withVideoFilters=t.videoFilter=t.videoFilters=function(t){return arguments.length>1&&(t=[].slice.call(arguments)),Array.isArray(t)||(t=[t]),this._currentOutput.videoFilters(r.makeFilterStrings(t)),this},t.withOutputFps=t.withOutputFPS=t.withFpsOutput=t.withFPSOutput=t.withFps=t.withFPS=t.outputFPS=t.outputFps=t.fpsOutput=t.FPSOutput=t.fps=t.FPS=function(t){return this._currentOutput.video("-r",t),this},t.takeFrames=t.withFrames=t.frames=function(t){return this._currentOutput.video("-vframes",t),this}}},61789,(t,e,n)=>{"use strict";function r(t,e,n,r){return[{filter:"scale",options:{w:"if(gt(a,"+n+"),"+t+",trunc("+e+"*a/2)*2)",h:"if(lt(a,"+n+"),"+e+",trunc("+t+"/a/2)*2)"}},{filter:"pad",options:{w:t,h:e,x:"if(gt(a,"+n+"),0,("+t+"-iw)/2)",y:"if(lt(a,"+n+"),0,("+e+"-ih)/2)",color:r}}]}function i(t,e,n){var i,o,u,a=t.sizeData=t.sizeData||{};if(a[e]=n,!("size"in a))return[];var s=a.size.match(/([0-9]+)x([0-9]+)/),c=a.size.match(/([0-9]+)x\?/),l=a.size.match(/\?x([0-9]+)/),f=a.size.match(/\b([0-9]{1,3})%/);if(f){var p=Number(f[1])/100;return[{filter:"scale",options:{w:"trunc(iw*"+p+"/2)*2",h:"trunc(ih*"+p+"/2)*2"}}]}if(s)return(u=(i=2*Math.round(Number(s[1])/2))/(o=2*Math.round(Number(s[2])/2)),a.pad)?r(i,o,u,a.pad):[{filter:"scale",options:{w:i,h:o}}];if(c||l)if("aspect"in a)return(i=c?c[1]:Math.round(Number(l[1])*a.aspect),o=l?l[1]:Math.round(Number(c[1])/a.aspect),i=2*Math.round(i/2),o=2*Math.round(o/2),a.pad)?r(i,o,a.aspect,a.pad):[{filter:"scale",options:{w:i,h:o}}];else if(c)return[{filter:"scale",options:{w:2*Math.round(Number(c[1])/2),h:"trunc(ow/a/2)*2"}}];else return[{filter:"scale",options:{w:"trunc(oh*a/2)*2",h:2*Math.round(Number(l[1])/2)}}];throw Error("Invalid size specified: "+a.size)}e.exports=function(t){t.keepPixelAspect=t.keepDisplayAspect=t.keepDisplayAspectRatio=t.keepDAR=function(){return this.videoFilters([{filter:"scale",options:{w:"if(gt(sar,1),iw*sar,iw)",h:"if(lt(sar,1),ih/sar,ih)"}},{filter:"setsar",options:"1"}])},t.withSize=t.setSize=t.size=function(t){var e=i(this._currentOutput,"size",t);return this._currentOutput.sizeFilters.clear(),this._currentOutput.sizeFilters(e),this},t.withAspect=t.withAspectRatio=t.setAspect=t.setAspectRatio=t.aspect=t.aspectRatio=function(t){var e=Number(t);if(isNaN(e)){var n=t.match(/^(\d+):(\d+)$/);if(n)e=Number(n[1])/Number(n[2]);else throw Error("Invalid aspect ratio: "+t)}var r=i(this._currentOutput,"aspect",e);return this._currentOutput.sizeFilters.clear(),this._currentOutput.sizeFilters(r),this},t.applyAutopadding=t.applyAutoPadding=t.applyAutopad=t.applyAutoPad=t.withAutopadding=t.withAutoPadding=t.withAutopad=t.withAutoPad=t.autoPad=t.autopad=function(t,e){"string"==typeof t&&(e=t,t=!0),void 0===t&&(t=!0);var n=i(this._currentOutput,"pad",!!t&&(e||"black"));return this._currentOutput.sizeFilters.clear(),this._currentOutput.sizeFilters(n),this}}},21152,(t,e,n)=>{"use strict";var r=t.r(95578);e.exports=function(t){t.addOutput=t.output=function(t,e){var n=!1;if(!t&&this._currentOutput)throw Error("Invalid output");if(t&&"string"!=typeof t){if(!("writable"in t)||!t.writable)throw Error("Invalid output")}else if("string"==typeof t){var i=t.match(/^([a-z]{2,}):/i);n=!i||"file"===i[0]}if(!t||"target"in this._currentOutput){if(t&&"string"!=typeof t&&this._outputs.some(function(t){return"string"!=typeof t.target}))throw Error("Only one output stream is supported");this._outputs.push(this._currentOutput={target:t,isFile:n,flags:{},pipeopts:e||{}});var o=this;["audio","audioFilters","video","videoFilters","sizeFilters","options"].forEach(function(t){o._currentOutput[t]=r.args()}),t||delete this._currentOutput.target}else this._currentOutput.target=t,this._currentOutput.isFile=n,this._currentOutput.pipeopts=e||{};return this},t.seekOutput=t.seek=function(t){return this._currentOutput.options("-ss",t),this},t.withDuration=t.setDuration=t.duration=function(t){return this._currentOutput.options("-t",t),this},t.toFormat=t.withOutputFormat=t.outputFormat=t.format=function(t){return this._currentOutput.options("-f",t),this},t.map=function(t){return this._currentOutput.options("-map",t.replace(r.streamRegexp,"[$1]")),this},t.updateFlvMetadata=t.flvmeta=function(){return this._currentOutput.flags.flvmeta=!0,this}}},76606,(t,e,n)=>{"use strict";var r=t.r(95578);e.exports=function(t){t.addInputOption=t.addInputOptions=t.withInputOption=t.withInputOptions=t.inputOption=t.inputOptions=function(t){if(!this._currentInput)throw Error("No input specified");var e=!0;return arguments.length>1&&(t=[].slice.call(arguments),e=!1),Array.isArray(t)||(t=[t]),this._currentInput.options(t.reduce(function(t,n){var r=String(n).split(" ");return e&&2===r.length?t.push(r[0],r[1]):t.push(n),t},[])),this},t.addOutputOption=t.addOutputOptions=t.addOption=t.addOptions=t.withOutputOption=t.withOutputOptions=t.withOption=t.withOptions=t.outputOption=t.outputOptions=function(t){var e=!0;return arguments.length>1&&(t=[].slice.call(arguments),e=!1),Array.isArray(t)||(t=[t]),this._currentOutput.options(t.reduce(function(t,n){var r=String(n).split(" ");return e&&2===r.length?t.push(r[0],r[1]):t.push(n),t},[])),this},t.filterGraph=t.complexFilter=function(t,e){if(this._complexFilters.clear(),Array.isArray(t)||(t=[t]),this._complexFilters("-filter_complex",r.makeFilterStrings(t).join(";")),Array.isArray(e)){var n=this;e.forEach(function(t){n._complexFilters("-map",t.replace(r.streamRegexp,"[$1]"))})}else"string"==typeof e&&this._complexFilters("-map",e.replace(r.streamRegexp,"[$1]"));return this}}},70895,(t,e,n)=>{"use strict";var r=t.r(14747);e.exports=function(t){t.usingPreset=t.preset=function(t){if("function"==typeof t)t(this);else try{var e=r.join(this.options.presets,t),n=(()=>{let t=Error("Cannot find module 'unknown'");throw t.code="MODULE_NOT_FOUND",t})();if("function"==typeof n.load)n.load(this);else throw Error("preset "+e+" has no load() function")}catch(t){throw Error("preset "+e+" could not be loaded: "+t.message)}return this}}},65908,(t,e,n)=>{!function(){var n,r,i={};function o(t){var e=!1;return function(){if(e)throw Error("Callback was already called.");e=!0,t.apply(n,arguments)}}n=this,null!=n&&(r=n.async),i.noConflict=function(){return n.async=r,i};var u=function(t,e){if(t.forEach)return t.forEach(e);for(var n=0;n<t.length;n+=1)e(t[n],n,t)},a=function(t,e){if(t.map)return t.map(e);var n=[];return u(t,function(t,r,i){n.push(e(t,r,i))}),n},s=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e};"undefined"!=typeof process&&process.nextTick?(i.nextTick=process.nextTick,"undefined"!=typeof setImmediate?i.setImmediate=function(t){setImmediate(t)}:i.setImmediate=i.nextTick):("function"==typeof setImmediate?i.nextTick=function(t){setImmediate(t)}:i.nextTick=function(t){setTimeout(t,0)},i.setImmediate=i.nextTick),i.each=function(t,e,n){if(n=n||function(){},!t.length)return n();var r=0;u(t,function(i){e(i,o(function(e){e?(n(e),n=function(){}):(r+=1)>=t.length&&n(null)}))})},i.forEach=i.each,i.eachSeries=function(t,e,n){if(n=n||function(){},!t.length)return n();var r=0,i=function(){e(t[r],function(e){e?(n(e),n=function(){}):(r+=1)>=t.length?n(null):i()})};i()},i.forEachSeries=i.eachSeries,i.eachLimit=function(t,e,n,r){c(e).apply(null,[t,n,r])},i.forEachLimit=i.eachLimit;var c=function(t){return function(e,n,r){if(r=r||function(){},!e.length||t<=0)return r();var i=0,o=0,u=0;!function a(){if(i>=e.length)return r();for(;u<t&&o<e.length;)o+=1,u+=1,n(e[o-1],function(t){t?(r(t),r=function(){}):(i+=1,u-=1,i>=e.length?r():a())})}()}},l=function(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[i.each].concat(e))}},f=function(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[i.eachSeries].concat(e))}},p=function(t,e,n,r){var i=[];t(e=a(e,function(t,e){return{index:e,value:t}}),function(t,e){n(t.value,function(n,r){i[t.index]=r,e(n)})},function(t){r(t,i)})};i.map=l(p),i.mapSeries=f(p),i.mapLimit=function(t,e,n,r){return h(e)(t,n,r)};var h=function(t){return function(){var e=Array.prototype.slice.call(arguments);return p.apply(null,[c(t)].concat(e))}};i.reduce=function(t,e,n,r){i.eachSeries(t,function(t,r){n(e,t,function(t,n){e=n,r(t)})},function(t){r(t,e)})},i.inject=i.reduce,i.foldl=i.reduce,i.reduceRight=function(t,e,n,r){var o=a(t,function(t){return t}).reverse();i.reduce(o,e,n,r)},i.foldr=i.reduceRight;var d=function(t,e,n,r){var i=[];t(e=a(e,function(t,e){return{index:e,value:t}}),function(t,e){n(t.value,function(n){n&&i.push(t),e()})},function(t){r(a(i.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})};i.filter=l(d),i.filterSeries=f(d),i.select=i.filter,i.selectSeries=i.filterSeries;var m=function(t,e,n,r){var i=[];t(e=a(e,function(t,e){return{index:e,value:t}}),function(t,e){n(t.value,function(n){n||i.push(t),e()})},function(t){r(a(i.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})};i.reject=l(m),i.rejectSeries=f(m);var v=function(t,e,n,r){t(e,function(t,e){n(t,function(n){n?(r(t),r=function(){}):e()})},function(t){r()})};i.detect=l(v),i.detectSeries=f(v),i.some=function(t,e,n){i.each(t,function(t,r){e(t,function(t){t&&(n(!0),n=function(){}),r()})},function(t){n(!1)})},i.any=i.some,i.every=function(t,e,n){i.each(t,function(t,r){e(t,function(t){t||(n(!1),n=function(){}),r()})},function(t){n(!0)})},i.all=i.every,i.sortBy=function(t,e,n){i.map(t,function(t,n){e(t,function(e,r){e?n(e):n(null,{value:t,criteria:r})})},function(t,e){if(t)return n(t);n(null,a(e.sort(function(t,e){var n=t.criteria,r=e.criteria;return n<r?-1:+(n>r)}),function(t){return t.value}))})},i.auto=function(t,e){e=e||function(){};var n=s(t);if(!n.length)return e(null);var r={},o=[],a=function(t){o.unshift(t)},c=function(t){for(var e=0;e<o.length;e+=1)if(o[e]===t)return void o.splice(e,1)},l=function(){u(o.slice(0),function(t){t()})};a(function(){s(r).length===n.length&&(e(null,r),e=function(){})}),u(n,function(n){var o=t[n]instanceof Function?[t[n]]:t[n],f=function(t){var o=Array.prototype.slice.call(arguments,1);if(o.length<=1&&(o=o[0]),t){var a={};u(s(r),function(t){a[t]=r[t]}),a[n]=o,e(t,a),e=function(){}}else r[n]=o,i.setImmediate(l)},p=o.slice(0,Math.abs(o.length-1))||[],h=function(){var t,e;return t=function(t,e){return t&&r.hasOwnProperty(e)},e=!0,(p.reduce?p.reduce(t,e):(u(p,function(n,r,i){e=t(e,n,r,i)}),e))&&!r.hasOwnProperty(n)};if(h())o[o.length-1](f,r);else{var d=function(){h()&&(c(d),o[o.length-1](f,r))};a(d)}})},i.waterfall=function(t,e){if(e=e||function(){},t.constructor!==Array){var n=Error("First argument to waterfall must be an array of functions");return e(n)}if(!t.length)return e();var r=function(t){return function(n){if(n)e.apply(null,arguments),e=function(){};else{var o=Array.prototype.slice.call(arguments,1),u=t.next();u?o.push(r(u)):o.push(e),i.setImmediate(function(){t.apply(null,o)})}}};r(i.iterator(t))()};var g=function(t,e,n){if(n=n||function(){},e.constructor===Array)t.map(e,function(t,e){t&&t(function(t){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),e.call(null,t,n)})},n);else{var r={};t.each(s(e),function(t,n){e[t](function(e){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),r[t]=i,n(e)})},function(t){n(t,r)})}};i.parallel=function(t,e){g({map:i.map,each:i.each},t,e)},i.parallelLimit=function(t,e,n){g({map:h(e),each:c(e)},t,n)},i.series=function(t,e){if(e=e||function(){},t.constructor===Array)i.mapSeries(t,function(t,e){t&&t(function(t){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),e.call(null,t,n)})},e);else{var n={};i.eachSeries(s(t),function(e,r){t[e](function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),n[e]=i,r(t)})},function(t){e(t,n)})}},i.iterator=function(t){var e=function(n){var r=function(){return t.length&&t[n].apply(null,arguments),r.next()};return r.next=function(){return n<t.length-1?e(n+1):null},r};return e(0)},i.apply=function(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e.concat(Array.prototype.slice.call(arguments)))}};var y=function(t,e,n,r){var i=[];t(e,function(t,e){n(t,function(t,n){i=i.concat(n||[]),e(t)})},function(t){r(t,i)})};i.concat=l(y),i.concatSeries=f(y),i.whilst=function(t,e,n){t()?e(function(r){if(r)return n(r);i.whilst(t,e,n)}):n()},i.doWhilst=function(t,e,n){t(function(r){if(r)return n(r);e()?i.doWhilst(t,e,n):n()})},i.until=function(t,e,n){t()?n():e(function(r){if(r)return n(r);i.until(t,e,n)})},i.doUntil=function(t,e,n){t(function(r){if(r)return n(r);e()?n():i.doUntil(t,e,n)})},i.queue=function(t,e){function n(t,n,r,o){n.constructor!==Array&&(n=[n]),u(n,function(n){var u={data:n,callback:"function"==typeof o?o:null};r?t.tasks.unshift(u):t.tasks.push(u),t.saturated&&t.tasks.length===e&&t.saturated(),i.setImmediate(t.process)})}void 0===e&&(e=1);var r=0,a={tasks:[],concurrency:e,saturated:null,empty:null,drain:null,push:function(t,e){n(a,t,!1,e)},unshift:function(t,e){n(a,t,!0,e)},process:function(){if(r<a.concurrency&&a.tasks.length){var e=a.tasks.shift();a.empty&&0===a.tasks.length&&a.empty(),r+=1;var n=o(function(){r-=1,e.callback&&e.callback.apply(e,arguments),a.drain&&a.tasks.length+r===0&&a.drain(),a.process()});t(e.data,n)}},length:function(){return a.tasks.length},running:function(){return r}};return a},i.cargo=function(t,e){var n=!1,r=[],o={tasks:r,payload:e,saturated:null,empty:null,drain:null,push:function(t,n){t.constructor!==Array&&(t=[t]),u(t,function(t){r.push({data:t,callback:"function"==typeof n?n:null}),o.saturated&&r.length===e&&o.saturated()}),i.setImmediate(o.process)},process:function i(){if(!n){if(0===r.length){o.drain&&o.drain();return}var s="number"==typeof e?r.splice(0,e):r.splice(0),c=a(s,function(t){return t.data});o.empty&&o.empty(),n=!0,t(c,function(){n=!1;var t=arguments;u(s,function(e){e.callback&&e.callback.apply(null,t)}),i()})}},length:function(){return r.length},running:function(){return n}};return o};var w=function(t){return function(e){var n=Array.prototype.slice.call(arguments,1);e.apply(null,n.concat([function(e){var n=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(e?console.error&&console.error(e):console[t]&&u(n,function(e){console[t](e)}))}]))}};i.log=w("log"),i.dir=w("dir"),i.memoize=function(t,e){var n={},r={};e=e||function(t){return t};var i=function(){var i=Array.prototype.slice.call(arguments),o=i.pop(),u=e.apply(null,i);u in n?o.apply(null,n[u]):u in r?r[u].push(o):(r[u]=[o],t.apply(null,i.concat([function(){n[u]=arguments;var t=r[u];delete r[u];for(var e=0,i=t.length;e<i;e++)t[e].apply(null,arguments)}])))};return i.memo=n,i.unmemoized=t,i},i.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},i.times=function(t,e,n){for(var r=[],o=0;o<t;o++)r.push(o);return i.map(r,e,n)},i.timesSeries=function(t,e,n){for(var r=[],o=0;o<t;o++)r.push(o);return i.mapSeries(r,e,n)},i.compose=function(){var t=Array.prototype.reverse.call(arguments);return function(){var e=this,n=Array.prototype.slice.call(arguments),r=n.pop();i.reduce(t,n,function(t,n,r){n.apply(e,t.concat([function(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);r(t,e)}]))},function(t,n){r.apply(e,[t].concat(n))})}};var b=function(t,e){var n=function(){var n=this,r=Array.prototype.slice.call(arguments);return t(e,function(t,e){t.apply(n,r.concat([e]))},r.pop())};if(!(arguments.length>2))return n;var r=Array.prototype.slice.call(arguments,2);return n.apply(this,r)};if(i.applyEach=l(b),i.applyEachSeries=f(b),i.forever=function(t,e){!function n(r){if(r){if(e)return e(r);throw r}t(n)}()},"undefined"!=typeof define&&define.amd)void 0!==i&&t.v(i);else e.exports?e.exports=i:n.async=i}()},28979,(t,e,n)=>{"use strict";var r=t.r(33405).spawn;t.r(14747),t.r(22734);var i=t.r(65908),o=t.r(95578);function u(t){t._inputs[0].isStream||t.ffprobe(0,function(e,n){t._ffprobeData=n})}e.exports=function(t){t._spawnFfmpeg=function(t,e,n,i){"function"==typeof e&&(i=n,n=e,e={}),void 0===i&&(i=n,n=function(){});var u="stdoutLines"in e?e.stdoutLines:this.options.stdoutLines;this._getFfmpegPath(function(a,s){if(a)return i(a);if(!s||0===s.length)return i(Error("Cannot find ffmpeg"));e.niceness&&0!==e.niceness&&!o.isWindows&&(t.unshift("-n",e.niceness,s),s="nice");var c=o.linesRing(u),l=!1,f=o.linesRing(u),p=!1,h=r(s,t,e);h.stderr&&h.stderr.setEncoding("utf8"),h.on("error",function(t){i(t)});var d=null;function m(t){t&&(d=t),v&&(l||!e.captureStdout)&&p&&i(d,c,f)}var v=!1;h.on("exit",function(t,e){v=!0,e?m(Error("ffmpeg was killed with signal "+e)):t?m(Error("ffmpeg exited with code "+t)):m()}),e.captureStdout&&(h.stdout.on("data",function(t){c.append(t)}),h.stdout.on("close",function(){c.close(),l=!0,m()})),h.stderr.on("data",function(t){f.append(t)}),h.stderr.on("close",function(){f.close(),p=!0,m()}),n(h,c,f)})},t._getArguments=function(){var t=this._complexFilters.get(),e=this._outputs.some(function(t){return t.isFile});return[].concat(this._inputs.reduce(function(t,e){var n="string"==typeof e.source?e.source:"pipe:0";return t.concat(e.options.get(),["-i",n])},[]),this._global.get(),e?["-y"]:[],t,this._outputs.reduce(function(t,e){var n,r=o.makeFilterStrings(e.sizeFilters.get()),i=e.audioFilters.get(),u=e.videoFilters.get().concat(r);return n=e.target?"string"==typeof e.target?[e.target]:["pipe:1"]:[],t.concat(e.audio.get(),i.length?["-filter:a",i.join(",")]:[],e.video.get(),u.length?["-filter:v",u.join(",")]:[],e.options.get(),n)},[]))},t._prepare=function(t,e){var n=this;i.waterfall([function(t){n._checkCapabilities(t)},function(t){if(!e)return t();n.ffprobe(0,function(e,r){e||(n._ffprobeData=r),t()})},function(t){n._outputs.some(function(t){return t.flags.flvmeta&&!t.isFile&&(n.logger.warn("Updating flv metadata is only supported for files"),t.flags.flvmeta=!1),t.flags.flvmeta})?n._getFlvtoolPath(function(e){t(e)}):t()},function(t){var e;try{e=n._getArguments()}catch(e){return t(e)}t(null,e)},function(t,e){n.availableEncoders(function(n,r){for(var i=0;i<t.length;i++)("-acodec"===t[i]||"-vcodec"===t[i])&&t[++i]in r&&r[t[i]].experimental&&(t.splice(i+1,0,"-strict","experimental"),i+=2);e(null,t)})}],t),e||(this.listeners("progress").length>0?u(this):this.once("newListener",function(t){"progress"===t&&u(this)}))},t.exec=t.execute=t.run=function(){var t=this;if(!this._outputs.some(function(t){return"target"in t}))throw Error("No output specified");var e=this._outputs.filter(function(t){return"string"!=typeof t.target})[0],n=this._inputs.filter(function(t){return"string"!=typeof t.source})[0],u=!1;function a(e,n,r){u||(u=!0,e?t.emit("error",e,n,r):t.emit("end",n,r))}return t._prepare(function(u,s){if(u)return a(u);t._spawnFfmpeg(s,{captureStdout:!e,niceness:t.options.niceness,cwd:t.options.cwd,windowsHide:!0},function(r,i,u){if(t.ffmpegProc=r,t.emit("start","ffmpeg "+s.join(" ")),n&&(n.source.on("error",function(t){var e=Error("Input stream error: "+t.message);e.inputStreamError=t,a(e),r.kill()}),n.source.resume(),n.source.pipe(r.stdin),r.stdin.on("error",function(){})),t.options.timeout&&(t.processTimer=setTimeout(function(){a(Error("process ran into a timeout ("+t.options.timeout+"s)"),i.get(),u.get()),r.kill()},1e3*t.options.timeout)),e&&(r.stdout.pipe(e.target,e.pipeopts),e.target.on("close",function(){t.logger.debug("Output stream closed, scheduling kill for ffmpeg process"),setTimeout(function(){a(Error("Output stream closed")),r.kill()},20)}),e.target.on("error",function(e){t.logger.debug("Output stream error, killing ffmpeg process");var n=Error("Output stream error: "+e.message);n.outputStreamError=e,a(n,i.get(),u.get()),r.kill("SIGKILL")})),u){if(t.listeners("stderr").length&&u.callback(function(e){t.emit("stderr",e)}),t.listeners("codecData").length){var c=!1,l={};u.callback(function(e){c||(c=o.extractCodecData(t,e,l))})}t.listeners("progress").length&&u.callback(function(e){o.extractProgress(t,e)})}},function(e,n,u){if(clearTimeout(t.processTimer),delete t.ffmpegProc,e)e.message.match(/ffmpeg exited with code/)&&(e.message+=": "+o.extractError(u.get())),a(e,n.get(),u.get());else{var s=t._outputs.filter(function(t){return t.flags.flvmeta});s.length?t._getFlvtoolPath(function(t,e){if(t)return a(t);i.each(s,function(t,n){r(e,["-U",t.target],{windowsHide:!0}).on("error",function(r){n(Error("Error running "+e+" on "+t.target+": "+r.message))}).on("exit",function(r,i){0!==r||i?n(Error(e+" "+(i?"received signal "+i:"exited with code "+r))+" when running on "+t.target):n()})},function(t){t?a(t):a(null,n.get(),u.get())})}):a(null,n.get(),u.get())}})}),this},t.renice=function(t){if(!o.isWindows&&(((t=t||0)<-20||t>20)&&this.logger.warn("Invalid niceness value: "+t+", must be between -20 and 20"),t=Math.min(20,Math.max(-20,t)),this.options.niceness=t,this.ffmpegProc)){var e=this.logger,n=this.ffmpegProc.pid,i=r("renice",[t,"-p",n],{windowsHide:!0});i.on("error",function(t){e.warn("could not renice process "+n+": "+t.message)}),i.on("exit",function(r,i){i?e.warn("could not renice process "+n+": renice was killed by signal "+i):r?e.warn("could not renice process "+n+": renice exited with "+r):e.info("successfully reniced process "+n+" to "+t+" niceness")})}return this},t.kill=function(t){return this.ffmpegProc?this.ffmpegProc.kill(t||"SIGKILL"):this.logger.warn("No running ffmpeg process, cannot send signal"),this}}},14777,(t,e,n)=>{"use strict";var r=t.r(22734),i=t.r(14747),o=t.r(65908),u=t.r(95578),a=/^\s*([D ])([E ])([VAS])([S ])([D ])([T ]) ([^ ]+) +(.*)$/,s=/^\s*([D\.])([E\.])([VAS])([I\.])([L\.])([S\.]) ([^ ]+) +(.*)$/,c=/\(encoders:([^\)]+)\)/,l=/\(decoders:([^\)]+)\)/,f=/^\s*([VAS\.])([F\.])([S\.])([X\.])([B\.])([D\.]) ([^ ]+) +(.*)$/,p=/^\s*([D ])([E ])\s+([^ ]+)\s+(.*)$/,h=/\r\n|\r|\n/,d=/^(?: [T\.][S\.][C\.] )?([^ ]+) +(AA?|VV?|\|)->(AA?|VV?|\|) +(.*)$/,m={};e.exports=function(t){t.setFfmpegPath=function(t){return m.ffmpegPath=t,this},t.setFfprobePath=function(t){return m.ffprobePath=t,this},t.setFlvtoolPath=function(t){return m.flvtoolPath=t,this},t._forgetPaths=function(){delete m.ffmpegPath,delete m.ffprobePath,delete m.flvtoolPath},t._getFfmpegPath=function(t){if("ffmpegPath"in m)return t(null,m.ffmpegPath);o.waterfall([function(t){process.env.FFMPEG_PATH?r.exists(process.env.FFMPEG_PATH,function(e){e?t(null,process.env.FFMPEG_PATH):t(null,"")}):t(null,"")},function(t,e){if(t.length)return e(null,t);u.which("ffmpeg",function(t,n){e(t,n)})}],function(e,n){e?t(e):t(null,m.ffmpegPath=n||"")})},t._getFfprobePath=function(t){var e=this;if("ffprobePath"in m)return t(null,m.ffprobePath);o.waterfall([function(t){process.env.FFPROBE_PATH?r.exists(process.env.FFPROBE_PATH,function(e){t(null,e?process.env.FFPROBE_PATH:"")}):t(null,"")},function(t,e){if(t.length)return e(null,t);u.which("ffprobe",function(t,n){e(t,n)})},function(t,n){if(t.length)return n(null,t);e._getFfmpegPath(function(t,e){if(t)n(t);else if(e.length){var o=u.isWindows?"ffprobe.exe":"ffprobe",a=i.join(i.dirname(e),o);r.exists(a,function(t){n(null,t?a:"")})}else n(null,"")})}],function(e,n){e?t(e):t(null,m.ffprobePath=n||"")})},t._getFlvtoolPath=function(t){if("flvtoolPath"in m)return t(null,m.flvtoolPath);o.waterfall([function(t){process.env.FLVMETA_PATH?r.exists(process.env.FLVMETA_PATH,function(e){t(null,e?process.env.FLVMETA_PATH:"")}):t(null,"")},function(t,e){if(t.length)return e(null,t);process.env.FLVTOOL2_PATH?r.exists(process.env.FLVTOOL2_PATH,function(t){e(null,t?process.env.FLVTOOL2_PATH:"")}):e(null,"")},function(t,e){if(t.length)return e(null,t);u.which("flvmeta",function(t,n){e(t,n)})},function(t,e){if(t.length)return e(null,t);u.which("flvtool2",function(t,n){e(t,n)})}],function(e,n){e?t(e):t(null,m.flvtoolPath=n||"")})},t.availableFilters=t.getAvailableFilters=function(t){if("filters"in m)return t(null,m.filters);this._spawnFfmpeg(["-filters"],{captureStdout:!0,stdoutLines:0},function(e,n){if(e)return t(e);var r=n.get().split("\n"),i={},o={A:"audio",V:"video","|":"none"};r.forEach(function(t){var e=t.match(d);e&&(i[e[1]]={description:e[4],input:o[e[2].charAt(0)],multipleInputs:e[2].length>1,output:o[e[3].charAt(0)],multipleOutputs:e[3].length>1})}),t(null,m.filters=i)})},t.availableCodecs=t.getAvailableCodecs=function(t){if("codecs"in m)return t(null,m.codecs);this._spawnFfmpeg(["-codecs"],{captureStdout:!0,stdoutLines:0},function(e,n){if(e)return t(e);var r=n.get().split(h),i={};r.forEach(function(t){var e=t.match(a);if(e&&"="!==e[7]&&(i[e[7]]={type:({V:"video",A:"audio",S:"subtitle"})[e[3]],description:e[8],canDecode:"D"===e[1],canEncode:"E"===e[2],drawHorizBand:"S"===e[4],directRendering:"D"===e[5],weirdFrameTruncation:"T"===e[6]}),(e=t.match(s))&&"="!==e[7]){var n=i[e[7]]={type:({V:"video",A:"audio",S:"subtitle"})[e[3]],description:e[8],canDecode:"D"===e[1],canEncode:"E"===e[2],intraFrameOnly:"I"===e[4],isLossy:"L"===e[5],isLossless:"S"===e[6]},r=n.description.match(c);r=r?r[1].trim().split(" "):[];var o=n.description.match(l);if(o=o?o[1].trim().split(" "):[],r.length||o.length){var f={};u.copy(n,f),delete f.canEncode,delete f.canDecode,r.forEach(function(t){i[t]={},u.copy(f,i[t]),i[t].canEncode=!0}),o.forEach(function(t){t in i||(i[t]={},u.copy(f,i[t])),i[t].canDecode=!0})}}}),t(null,m.codecs=i)})},t.availableEncoders=t.getAvailableEncoders=function(t){if("encoders"in m)return t(null,m.encoders);this._spawnFfmpeg(["-encoders"],{captureStdout:!0,stdoutLines:0},function(e,n){if(e)return t(e);var r=n.get().split(h),i={};r.forEach(function(t){var e=t.match(f);e&&"="!==e[7]&&(i[e[7]]={type:({V:"video",A:"audio",S:"subtitle"})[e[1]],description:e[8],frameMT:"F"===e[2],sliceMT:"S"===e[3],experimental:"X"===e[4],drawHorizBand:"B"===e[5],directRendering:"D"===e[6]})}),t(null,m.encoders=i)})},t.availableFormats=t.getAvailableFormats=function(t){if("formats"in m)return t(null,m.formats);this._spawnFfmpeg(["-formats"],{captureStdout:!0,stdoutLines:0},function(e,n){if(e)return t(e);var r=n.get().split(h),i={};r.forEach(function(t){var e=t.match(p);e&&e[3].split(",").forEach(function(t){t in i||(i[t]={description:e[4],canDemux:!1,canMux:!1}),"D"===e[1]&&(i[t].canDemux=!0),"E"===e[2]&&(i[t].canMux=!0)})}),t(null,m.formats=i)})},t._checkCapabilities=function(t){var e=this;o.waterfall([function(t){e.availableFormats(t)},function(t,n){var r;return 1===(r=e._outputs.reduce(function(e,n){var r=n.options.find("-f",1);return!r||r[0]in t&&t[r[0]].canMux||e.push(r),e},[])).length?n(Error("Output format "+r[0]+" is not available")):r.length>1?n(Error("Output formats "+r.join(", ")+" are not available")):1===(r=e._inputs.reduce(function(e,n){var r=n.options.find("-f",1);return!r||r[0]in t&&t[r[0]].canDemux||e.push(r[0]),e},[])).length?n(Error("Input format "+r[0]+" is not available")):r.length>1?n(Error("Input formats "+r.join(", ")+" are not available")):void n()},function(t){e.availableEncoders(t)},function(t,n){var r;return 1===(r=e._outputs.reduce(function(e,n){var r=n.audio.find("-acodec",1);return!r||"copy"===r[0]||r[0]in t&&"audio"===t[r[0]].type||e.push(r[0]),e},[])).length?n(Error("Audio codec "+r[0]+" is not available")):r.length>1?n(Error("Audio codecs "+r.join(", ")+" are not available")):1===(r=e._outputs.reduce(function(e,n){var r=n.video.find("-vcodec",1);return!r||"copy"===r[0]||r[0]in t&&"video"===t[r[0]].type||e.push(r[0]),e},[])).length?n(Error("Video codec "+r[0]+" is not available")):r.length>1?n(Error("Video codecs "+r.join(", ")+" are not available")):void n()}],t)}}},79181,(t,e,n)=>{"use strict";var r=t.r(33405).spawn;function i(t){return t.match(/^TAG:/)}function o(t){return t.match(/^DISPOSITION:/)}e.exports=function(t){t.ffprobe=function(){var t,e=null,n=[],u=arguments[arguments.length-1],a=!1;function s(t,e){a||(a=!0,u(t,e))}switch(arguments.length){case 3:e=arguments[0],n=arguments[1];break;case 2:"number"==typeof arguments[0]?e=arguments[0]:Array.isArray(arguments[0])&&(n=arguments[0])}if(null===e){if(!this._currentInput)return s(Error("No input specified"));t=this._currentInput}else if(!(t=this._inputs[e]))return s(Error("Invalid input index"));this._getFfprobePath(function(e,a){if(e)return s(e);if(!a)return s(Error("Cannot find ffprobe"));var c="",l=!1,f="",p=!1,h=t.isStream?"pipe:0":t.source,d=r(a,["-show_streams","-show_format"].concat(n,h),{windowsHide:!0});t.isStream&&(d.stdin.on("error",function(t){["ECONNRESET","EPIPE","EOF"].indexOf(t.code)>=0||s(t)}),d.stdin.on("close",function(){t.source.pause(),t.source.unpipe(d.stdin)}),t.source.pipe(d.stdin)),d.on("error",u);var m=null;function v(t){if(t&&(m=t),g&&l&&p){if(m)return f&&(m.message+="\n"+f),s(m);var e=function(t){var e=t.split(/\r\n|\r|\n/);e=e.filter(function(t){return t.length>0});var n={streams:[],format:{},chapters:[]};function r(t){for(var n={},r=e.shift();void 0!==r&&r.toLowerCase()!="[/"+t+"]";){if(r.match(/^\[/)){r=e.shift();continue}var i=r.match(/^([^=]+)=(.*)$/);i&&(!i[1].match(/^TAG:/)&&i[2].match(/^[0-9]+(\.[0-9]+)?$/)?n[i[1]]=Number(i[2]):n[i[1]]=i[2]),r=e.shift()}return n}for(var i=e.shift();void 0!==i;){if(i.match(/^\[stream/i)){var o=r("stream");n.streams.push(o)}else if(i.match(/^\[chapter/i)){var u=r("chapter");n.chapters.push(u)}else"[format]"===i.toLowerCase()&&(n.format=r("format"));i=e.shift()}return n}(c);[e.format].concat(e.streams).forEach(function(t){if(t){var e=Object.keys(t).filter(i);e.length&&(t.tags=t.tags||{},e.forEach(function(e){t.tags[e.substr(4)]=t[e],delete t[e]}));var n=Object.keys(t).filter(o);n.length&&(t.disposition=t.disposition||{},n.forEach(function(e){t.disposition[e.substr(12)]=t[e],delete t[e]}))}}),s(null,e)}}var g=!1;d.on("exit",function(t,e){g=!0,t?v(Error("ffprobe exited with code "+t)):e?v(Error("ffprobe was killed with signal "+e)):v()}),d.stdout.on("data",function(t){c+=t}),d.stdout.on("close",function(){l=!0,v()}),d.stderr.on("data",function(t){f+=t}),d.stderr.on("close",function(){p=!0,v()})})}}},88947,(t,e,n)=>{e.exports=t.x("stream",()=>require("stream"))},22388,(t,e,n)=>{"use strict";var r=t.r(22734),i=t.r(14747),o=t.r(88947).PassThrough,u=t.r(65908),a=t.r(95578);e.exports=function(t){t.saveToFile=t.save=function(t){return this.output(t).run(),this},t.writeToStream=t.pipe=t.stream=function(t,e){if(!t||"writable"in t||(e=t,t=void 0),!t){if(process.version.match(/v0\.8\./))throw Error("PassThrough stream is not supported on node v0.8");t=new o}return this.output(t,e).run(),t},t.takeScreenshots=t.thumbnail=t.thumbnails=t.screenshot=t.screenshots=function(t,e){var n,o=this,s=this._currentInput.source;if("number"==typeof(t=t||{count:1})&&(t={count:t}),"folder"in t||(t.folder=e||"."),"timestamps"in t&&(t.timemarks=t.timestamps),!("timemarks"in t)){if(!t.count)throw Error("Cannot take screenshots: neither a count nor a timemark list are specified");var c=100/(1+t.count);t.timemarks=[];for(var l=0;l<t.count;l++)t.timemarks.push(c*(l+1)+"%")}if("size"in t){var f=t.size.match(/^(\d+)x(\d+)$/),p=t.size.match(/^(\d+)x\?$/),h=t.size.match(/^\?x(\d+)$/),d=t.size.match(/^(\d+)%$/);if(!f&&!p&&!h&&!d)throw Error("Invalid size parameter: "+t.size)}function m(t){n?t(null,n):o.ffprobe(function(e,r){n=r,t(e,r)})}return u.waterfall([function(e){if(t.timemarks.some(function(t){return(""+t).match(/^[\d.]+%$/)})){if("string"!=typeof s)return e(Error("Cannot compute screenshot timemarks with an input stream, please specify fixed timemarks"));m(function(n,r){if(n)e(n);else{var i=r.streams.reduce(function(t,e){return"video"===e.codec_type&&e.width*e.height>t.width*t.height?e:t},{width:0,height:0});if(0===i.width)return e(Error("No video stream in input, cannot take screenshots"));var o=Number(i.duration);if(isNaN(o)&&(o=Number(r.format.duration)),isNaN(o))return e(Error("Could not get input duration, please specify fixed timemarks"));t.timemarks=t.timemarks.map(function(t){return(""+t).match(/^([\d.]+)%$/)?o*parseFloat(t)/100:t}),e()}})}else e()},function(e){t.timemarks=t.timemarks.map(function(t){return a.timemarkToSeconds(t)}).sort(function(t,e){return t-e}),e()},function(e){var n=t.filename||"tn.png";if(-1===n.indexOf(".")&&(n+=".png"),t.timemarks.length>1&&!n.match(/%(s|0*i)/)){var r=i.extname(n);n=i.join(i.dirname(n),i.basename(n,r)+"_%i"+r)}e(null,n)},function(t,e){if(t.match(/%[bf]/)){if("string"!=typeof s)return e(Error("Cannot replace %f or %b when using an input stream"));t=t.replace(/%f/g,i.basename(s)).replace(/%b/g,i.basename(s,i.extname(s)))}e(null,t)},function(t,e){if(t.match(/%[whr]/)){if(f)return e(null,t,f[1],f[2]);m(function(n,r){if(n)return e(Error("Could not determine video resolution to replace %w, %h or %r"));var i=r.streams.reduce(function(t,e){return"video"===e.codec_type&&e.width*e.height>t.width*t.height?e:t},{width:0,height:0});if(0===i.width)return e(Error("No video stream in input, cannot replace %w, %h or %r"));var o=i.width,u=i.height;p?(u=u*Number(p[1])/o,o=Number(p[1])):h?(o=o*Number(h[1])/u,u=Number(h[1])):d&&(o=o*Number(d[1])/100,u=u*Number(d[1])/100),e(null,t,2*Math.round(o/2),2*Math.round(u/2))})}else e(null,t,-1,-1)},function(t,e,n,r){r(null,t=t.replace(/%r/g,"%wx%h").replace(/%w/g,e).replace(/%h/g,n))},function(e,n){var r=t.timemarks.map(function(t,n){return e.replace(/%s/g,a.timemarkToSeconds(t)).replace(/%(0*)i/g,function(t,e){var r=""+(n+1);return e.substr(0,Math.max(0,e.length+1-r.length))+r})});o.emit("filenames",r),n(null,r)},function(e,n){r.exists(t.folder,function(i){i?n(null,e):r.mkdir(t.folder,function(t){t?n(t):n(null,e)})})}],function(e,n){if(e)return o.emit("error",e);var r,u=t.timemarks.length,a=[r={filter:"split",options:u,outputs:[]}];if("size"in t){o.size(t.size);var s=o._currentOutput.sizeFilters.get().map(function(t,e){return e>0&&(t.inputs="size"+(e-1)),t.outputs="size"+e,t});r.inputs="size"+(s.length-1),a=s.concat(a),o._currentOutput.sizeFilters.clear()}for(var c=0,l=0;l<u;l++){var f="screen"+l;r.outputs.push(f),0===l&&(c=t.timemarks[l],o.seekInput(c)),o.output(i.join(t.folder,n[l])).frames(1).map(f),l>0&&o.seek(t.timemarks[l]-c)}o.complexFilter(a),o.run()}),this},t.mergeToFile=t.concatenate=t.concat=function(t,e){var n=this._inputs.filter(function(t){return!t.isStream})[0],r=this;return this.ffprobe(this._inputs.indexOf(n),function(n,i){if(n)return r.emit("error",n);var o=i.streams.some(function(t){return"audio"===t.codec_type}),u=i.streams.some(function(t){return"video"===t.codec_type});r.output(t,e).complexFilter({filter:"concat",options:{n:r._inputs.length,v:+!!u,a:+!!o}}).run()}),this}}},27699,(t,e,n)=>{e.exports=t.x("events",()=>require("events"))},16247,(t,e,n)=>{"use strict";var r=t.r(14747),i=t.r(24361),o=t.r(27699).EventEmitter,u=t.r(95578);function a(t,e){if(!(this instanceof a))return new a(t,e);o.call(this),"object"!=typeof t||"readable"in t?(e=e||{}).source=t:e=t,this._inputs=[],e.source&&this.input(e.source),this._outputs=[],this.output();var n=this;["_global","_complexFilters"].forEach(function(t){n[t]=u.args()}),e.stdoutLines="stdoutLines"in e?e.stdoutLines:100,e.presets=e.presets||e.preset||r.join("/ROOT/node_modules/fluent-ffmpeg/lib","presets"),e.niceness=e.niceness||e.priority||0,this.options=e,this.logger=e.logger||{debug:function(){},info:function(){},warn:function(){},error:function(){}}}i.inherits(a,o),e.exports=a,a.prototype.clone=function(){var t=new a,e=this;return t.options=this.options,t.logger=this.logger,t._inputs=this._inputs.map(function(t){return{source:t.source,options:t.options.clone()}}),"target"in this._outputs[0]?(t._outputs=[],t.output()):(t._outputs=[t._currentOutput={flags:{}}],["audio","audioFilters","video","videoFilters","sizeFilters","options"].forEach(function(n){t._currentOutput[n]=e._currentOutput[n].clone()}),this._currentOutput.sizeData&&(t._currentOutput.sizeData={},u.copy(this._currentOutput.sizeData,t._currentOutput.sizeData)),u.copy(this._currentOutput.flags,t._currentOutput.flags)),["_global","_complexFilters"].forEach(function(n){t[n]=e[n].clone()}),t},t.r(69443)(a.prototype),t.r(41822)(a.prototype),t.r(14491)(a.prototype),t.r(61789)(a.prototype),t.r(21152)(a.prototype),t.r(76606)(a.prototype),t.r(70895)(a.prototype),t.r(28979)(a.prototype),t.r(14777)(a.prototype),a.setFfmpegPath=function(t){new a().setFfmpegPath(t)},a.setFfprobePath=function(t){new a().setFfprobePath(t)},a.setFlvtoolPath=function(t){new a().setFlvtoolPath(t)},a.availableFilters=a.getAvailableFilters=function(t){new a().availableFilters(t)},a.availableCodecs=a.getAvailableCodecs=function(t){new a().availableCodecs(t)},a.availableFormats=a.getAvailableFormats=function(t){new a().availableFormats(t)},a.availableEncoders=a.getAvailableEncoders=function(t){new a().availableEncoders(t)},t.r(79181)(a.prototype),a.ffprobe=function(t){var e=new a(t);e.ffprobe.apply(e,Array.prototype.slice.call(arguments,1))},t.r(22388)(a.prototype)},66199,(t,e,n)=>{e.exports=t.r(16247)},66774,t=>{t.v({name:"ffmpeg-static",version:"5.3.0",description:"ffmpeg binaries for macOS, Linux and Windows",scripts:{install:"node install.js",prepublishOnly:"npm run install"},"ffmpeg-static":{"binary-path-env-var":"FFMPEG_BIN","binary-release-tag-env-var":"FFMPEG_BINARY_RELEASE","binary-release-tag":"b6.1.1","binaries-url-env-var":"FFMPEG_BINARIES_URL","executable-base-name":"ffmpeg"},repository:{type:"git",url:"https://github.com/eugeneware/ffmpeg-static"},keywords:["ffmpeg","static","binary","binaries","mac","linux","windows"],authors:["Eugene Ware <eugene@noblesamurai.com>","Jannis R <mail@jannisr.de>"],contributors:["Thefrank (https://github.com/Thefrank)","Emil Sivervik <emil@sivervik.com>"],license:"GPL-3.0-or-later",bugs:{url:"https://github.com/eugeneware/ffmpeg-static/issues"},engines:{node:">=16"},dependencies:{"@derhuerst/http-basic":"^8.2.0","env-paths":"^2.2.0","https-proxy-agent":"^5.0.0",progress:"^2.0.3"},devDependencies:{"any-shell-escape":"^0.1.1"},main:"index.js",files:["index.js","install.js","example.js","types"],types:"types/index.d.ts"})},9e3,(t,e,n)=>{"use strict";let r=t.r(66774),{"binary-path-env-var":i,"executable-base-name":o}=r[r.name];if("string"!=typeof i)throw Error(`package.json: invalid/missing ${r.name}.binary-path-env-var entry`);if("string"!=typeof o)throw Error(`package.json: invalid/missing ${r.name}.executable-base-name entry`);if(process.env[i])e.exports=process.env[i];else{var u=t.r(46786),a=t.r(14747),s=Object.assign(Object.create(null),{darwin:["x64","arm64"],freebsd:["x64"],linux:["x64","ia32","arm64","arm"],win32:["x64","ia32"]}),c=process.env.npm_config_platform||u.platform(),l=process.env.npm_config_arch||u.arch();let n=a.join("/ROOT/node_modules/ffmpeg-static",o+("win32"===c?".exe":""));s[c]&&-1!==s[c].indexOf(l)||(n=null),e.exports=n}},55554,t=>{"use strict";var e=t.i(47909),n=t.i(74017),r=t.i(96250),i=t.i(59756),o=t.i(61916),u=t.i(14444),a=t.i(37092),s=t.i(69741),c=t.i(16795),l=t.i(87718),f=t.i(95169),p=t.i(47587),h=t.i(66012),d=t.i(70101),m=t.i(26937),v=t.i(10372),g=t.i(93695);t.i(52474);var y=t.i(220),w=t.i(89171),b=t.i(35508),x=t.i(24868),E=t.i(66199),_=t.i(9e3),O=t.i(14747);async function F(t){try{let e=await t.formData(),n=e.get("video"),r=e.get("userId"),i=e.get("caption")||"";if(!n)return w.NextResponse.json({error:"No file"},{status:400});let o=await n.arrayBuffer(),u=Buffer.from(o),a=O.default.join(process.cwd(),"public","uploads"),s=O.default.join(a,`${Date.now()}-${n.name}`),c=O.default.join(a,`compressed-${Date.now()}.mp4`);await (0,x.writeFile)(s,u),await new Promise((t,e)=>{(0,E.default)(s).outputOptions(["-vcodec libx264","-crf 28","-preset veryfast"]).save(c).on("end",t).on("error",e)});let l=await b.default.reel.create({data:{video:`/uploads/${O.default.basename(c)}`,caption:i,authorId:r}});return w.NextResponse.json({success:!0,reel:l})}catch(t){return console.log("Upload reel error:",t),w.NextResponse.json({error:"Something went wrong"},{status:500})}}E.default.setFfmpegPath(_.default),t.s(["POST",()=>F],28912);var A=t.i(28912);let k=new e.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/reels/upload/route",pathname:"/api/reels/upload",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/app/api/reels/upload/route.js",nextConfigOutput:"",userland:A}),{workAsyncStorage:P,workUnitAsyncStorage:S,serverHooks:I}=k;function T(){return(0,r.patchFetch)({workAsyncStorage:P,workUnitAsyncStorage:S})}async function R(t,e,r){k.isDev&&(0,i.addRequestMeta)(t,"devRequestTimingInternalsEnd",process.hrtime.bigint());let w="/api/reels/upload/route";w=w.replace(/\/index$/,"")||"/";let b=await k.prepare(t,e,{srcPage:w,multiZoneDraftMode:!1});if(!b)return e.statusCode=400,e.end("Bad Request"),null==r.waitUntil||r.waitUntil.call(r,Promise.resolve()),null;let{buildId:x,params:E,nextConfig:_,parsedUrl:O,isDraftMode:F,prerenderManifest:A,routerServerContext:P,isOnDemandRevalidate:S,revalidateOnlyGenerated:I,resolvedPathname:T,clientReferenceManifest:R,serverActionsManifest:N}=b,C=(0,s.normalizeAppPath)(w),D=!!(A.dynamicRoutes[C]||A.routes[T]),j=async()=>((null==P?void 0:P.render404)?await P.render404(t,e,O,!1):e.end("This page could not be found"),null);if(D&&!F){let t=!!A.routes[T],e=A.dynamicRoutes[C];if(e&&!1===e.fallback&&!t){if(_.experimental.adapterPath)return await j();throw new g.NoFallbackError}}let z=null;!D||k.isDev||F||(z="/index"===(z=T)?"/":z);let L=!0===k.isDev||!D,M=D&&!L;N&&R&&(0,u.setReferenceManifestsSingleton)({page:w,clientReferenceManifest:R,serverActionsManifest:N,serverModuleMap:(0,a.createServerModuleMap)({serverActionsManifest:N})});let $=t.method||"GET",H=(0,o.getTracer)(),V=H.getActiveScopeSpan(),q={params:E,prerenderManifest:A,renderOpts:{experimental:{authInterrupts:!!_.experimental.authInterrupts},cacheComponents:!!_.cacheComponents,supportsDynamicResponse:L,incrementalCache:(0,i.getRequestMeta)(t,"incrementalCache"),cacheLifeProfiles:_.cacheLife,waitUntil:r.waitUntil,onClose:t=>{e.on("close",t)},onAfterTaskError:void 0,onInstrumentationRequestError:(e,n,r)=>k.onRequestError(t,e,r,P)},sharedContext:{buildId:x}},B=new c.NodeNextRequest(t),U=new c.NodeNextResponse(e),G=l.NextRequestAdapter.fromNodeNextRequest(B,(0,l.signalFromNodeResponse)(e));try{let u=async t=>k.handle(G,q).finally(()=>{if(!t)return;t.setAttributes({"http.status_code":e.statusCode,"next.rsc":!1});let n=H.getRootSpanAttributes();if(!n)return;if(n.get("next.span_type")!==f.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${n.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let r=n.get("next.route");if(r){let e=`${$} ${r}`;t.setAttributes({"next.route":r,"http.route":r,"next.span_name":e}),t.updateName(e)}else t.updateName(`${$} ${w}`)}),a=!!(0,i.getRequestMeta)(t,"minimalMode"),s=async i=>{var o,s;let c=async({previousCacheEntry:n})=>{try{if(!a&&S&&I&&!n)return e.statusCode=404,e.setHeader("x-nextjs-cache","REVALIDATED"),e.end("This page could not be found"),null;let o=await u(i);t.fetchMetrics=q.renderOpts.fetchMetrics;let s=q.renderOpts.pendingWaitUntil;s&&r.waitUntil&&(r.waitUntil(s),s=void 0);let c=q.renderOpts.collectedTags;if(!D)return await (0,h.sendResponse)(B,U,o,q.renderOpts.pendingWaitUntil),null;{let t=await o.blob(),e=(0,d.toNodeOutgoingHttpHeaders)(o.headers);c&&(e[v.NEXT_CACHE_TAGS_HEADER]=c),!e["content-type"]&&t.type&&(e["content-type"]=t.type);let n=void 0!==q.renderOpts.collectedRevalidate&&!(q.renderOpts.collectedRevalidate>=v.INFINITE_CACHE)&&q.renderOpts.collectedRevalidate,r=void 0===q.renderOpts.collectedExpire||q.renderOpts.collectedExpire>=v.INFINITE_CACHE?void 0:q.renderOpts.collectedExpire;return{value:{kind:y.CachedRouteKind.APP_ROUTE,status:o.status,body:Buffer.from(await t.arrayBuffer()),headers:e},cacheControl:{revalidate:n,expire:r}}}}catch(e){throw(null==n?void 0:n.isStale)&&await k.onRequestError(t,e,{routerKind:"App Router",routePath:w,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:M,isOnDemandRevalidate:S})},P),e}},l=await k.handleResponse({req:t,nextConfig:_,cacheKey:z,routeKind:n.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:A,isRoutePPREnabled:!1,isOnDemandRevalidate:S,revalidateOnlyGenerated:I,responseGenerator:c,waitUntil:r.waitUntil,isMinimalMode:a});if(!D)return null;if((null==l||null==(o=l.value)?void 0:o.kind)!==y.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==l||null==(s=l.value)?void 0:s.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});a||e.setHeader("x-nextjs-cache",S?"REVALIDATED":l.isMiss?"MISS":l.isStale?"STALE":"HIT"),F&&e.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let f=(0,d.fromNodeOutgoingHttpHeaders)(l.value.headers);return a&&D||f.delete(v.NEXT_CACHE_TAGS_HEADER),!l.cacheControl||e.getHeader("Cache-Control")||f.get("Cache-Control")||f.set("Cache-Control",(0,m.getCacheControlHeader)(l.cacheControl)),await (0,h.sendResponse)(B,U,new Response(l.value.body,{headers:f,status:l.value.status||200})),null};V?await s(V):await H.withPropagatedContext(t.headers,()=>H.trace(f.BaseServerSpan.handleRequest,{spanName:`${$} ${w}`,kind:o.SpanKind.SERVER,attributes:{"http.method":$,"http.target":t.url}},s))}catch(e){if(e instanceof g.NoFallbackError||await k.onRequestError(t,e,{routerKind:"App Router",routePath:C,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:M,isOnDemandRevalidate:S})}),D)throw e;return await (0,h.sendResponse)(B,U,new Response(null,{status:500})),null}}t.s(["handler",()=>R,"patchFetch",()=>T,"routeModule",()=>k,"serverHooks",()=>I,"workAsyncStorage",()=>P,"workUnitAsyncStorage",()=>S],55554)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__00ca6dc5._.js.map