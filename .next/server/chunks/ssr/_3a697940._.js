module.exports=[35112,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactDOM},33354,(a,b,c)=>{"use strict";c._=function(a){return a&&a.__esModule?a:{default:a}}},32245,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"BailoutToCSR",{enumerable:!0,get:function(){return e}});let d=a.r(41997);function e({reason:a,children:b}){throw Object.defineProperty(new d.BailoutToCSRError(a),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}},7773,(a,b,c)=>{"use strict";function d(a){return a.split("/").map(a=>encodeURIComponent(a)).join("/")}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"encodeURIPath",{enumerable:!0,get:function(){return d}})},97458,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"PreloadChunks",{enumerable:!0,get:function(){return h}});let d=a.r(87924),e=a.r(35112),f=a.r(56704),g=a.r(7773);function h({moduleIds:a}){let b=f.workAsyncStorage.getStore();if(void 0===b)return null;let c=[];if(b.reactLoadableManifest&&a){let d=b.reactLoadableManifest;for(let b of a){if(!d[b])continue;let a=d[b].files;c.push(...a)}}return 0===c.length?null:(0,d.jsx)(d.Fragment,{children:c.map(a=>{let c=`${b.assetPrefix}/_next/${(0,g.encodeURIPath)(a)}`;return a.endsWith(".css")?(0,d.jsx)("link",{precedence:"dynamic",href:c,rel:"stylesheet",as:"style",nonce:b.nonce},a):((0,e.preload)(c,{as:"script",fetchPriority:"low",nonce:b.nonce}),null)})})}},69853,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return j}});let d=a.r(87924),e=a.r(72131),f=a.r(32245),g=a.r(97458);function h(a){return{default:a&&"default"in a?a.default:a}}let i={loader:()=>Promise.resolve(h(()=>null)),loading:null,ssr:!0},j=function(a){let b={...i,...a},c=(0,e.lazy)(()=>b.loader().then(h)),j=b.loading;function k(a){let h=j?(0,d.jsx)(j,{isLoading:!0,pastDelay:!0,error:null}):null,i=!b.ssr||!!b.loading,k=i?e.Suspense:e.Fragment,l=b.ssr?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(g.PreloadChunks,{moduleIds:b.modules}),(0,d.jsx)(c,{...a})]}):(0,d.jsx)(f.BailoutToCSR,{reason:"next/dynamic",children:(0,d.jsx)(c,{...a})});return(0,d.jsx)(k,{...i?{fallback:h}:{},children:l})}return k.displayName="LoadableComponent",k}},19721,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return e}});let d=a.r(33354)._(a.r(69853));function e(a,b){let c={};"function"==typeof a&&(c.loader=a);let e={...c,...b};return(0,d.default)({...e,modules:e.loadableGenerated?.modules})}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},65630,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(89644);let e=(0,a.i(19721).default)(async()=>{},{loadableGenerated:{modules:[98888]},ssr:!1});function f(){let{user:a}=(0,c.useContext)(d.AuthContext),[f,g]=(0,c.useState)([]),[h,i]=(0,c.useState)(null),[j,k]=(0,c.useState)({title:"",content:"",imageFile:null,videoFile:null,existingImage:"",existingVideo:"",showEmojiPicker:!1}),l=async()=>{let a=await fetch("/api/posts/mine");g((await a.json()).posts||[])};if((0,c.useEffect)(()=>{a&&l()},[a]),!a)return(0,b.jsx)("p",{children:"Loading..."});let m=async a=>{confirm("Are you sure you want to delete this post?")&&(await fetch(`/api/posts/${a}`,{method:"DELETE"}),l())},n=async a=>{let b=new FormData;b.append("title",j.title),b.append("content",j.content),j.imageFile&&b.append("image",j.imageFile),j.videoFile&&b.append("video",j.videoFile);let c=await fetch(`/api/posts/${a}`,{method:"PUT",body:b}),d=await c.json();c.ok?(i(null),k({title:"",content:"",imageFile:null,videoFile:null,existingImage:"",existingVideo:"",showEmojiPicker:!1}),l()):alert(d.error||"Failed to update post")},o=a=>{k(b=>({...b,content:b.content+a.emoji}))};return(0,b.jsxs)("div",{style:{padding:"30px"},children:[(0,b.jsx)("h1",{children:"My Posts"}),0===f.length?(0,b.jsx)("p",{children:"No posts yet."}):(0,b.jsx)("ul",{style:{marginTop:"20px"},children:f.map(a=>(0,b.jsx)("li",{style:{marginBottom:"20px",padding:"10px",border:"1px solid #ccc",borderRadius:"6px"},children:h===a.id?(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,b.jsx)("input",{value:j.title,onChange:a=>k(b=>({...b,title:a.target.value})),placeholder:"Title",style:{width:"100%",marginBottom:"5px"}}),(0,b.jsx)("textarea",{value:j.content,onChange:a=>k(b=>({...b,content:a.target.value})),placeholder:"Content",style:{width:"100%",marginBottom:"5px"},rows:3}),(0,b.jsx)("button",{type:"button",onClick:()=>k(a=>({...a,showEmojiPicker:!a.showEmojiPicker})),children:j.showEmojiPicker?"Close Emojis":"Add Emoji"}),j.showEmojiPicker&&(0,b.jsx)(e,{onEmojiClick:o}),(0,b.jsx)("input",{type:"file",accept:"image/*",onChange:a=>k(b=>({...b,imageFile:a.target.files[0]}))}),j.imageFile&&(0,b.jsx)("img",{src:URL.createObjectURL(j.imageFile),alt:"preview",style:{maxWidth:"100%"}}),!j.imageFile&&a.image&&(0,b.jsx)("img",{src:a.image,alt:"existing",style:{maxWidth:"100%"}}),(0,b.jsx)("input",{type:"file",accept:"video/*",onChange:a=>k(b=>({...b,videoFile:a.target.files[0]}))}),j.videoFile&&(0,b.jsx)("video",{controls:!0,style:{maxWidth:"100%"},children:(0,b.jsx)("source",{src:URL.createObjectURL(j.videoFile)})}),!j.videoFile&&a.video&&(0,b.jsx)("video",{controls:!0,style:{maxWidth:"100%"},children:(0,b.jsx)("source",{src:a.video})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("button",{onClick:()=>n(a.id),children:"Save"}),(0,b.jsx)("button",{onClick:()=>i(null),style:{marginLeft:"10px"},children:"Cancel"})]})]}):(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{children:a.title}),(0,b.jsx)("p",{children:a.content}),a.image&&(0,b.jsx)("img",{src:a.image,alt:"post",style:{maxWidth:"100%"}}),a.video&&(0,b.jsx)("video",{controls:!0,style:{maxWidth:"100%"},children:(0,b.jsx)("source",{src:a.video})}),(0,b.jsx)("small",{children:new Date(a.createdAt).toLocaleDateString()}),(0,b.jsxs)("div",{style:{marginTop:"5px"},children:[(0,b.jsx)("button",{onClick:()=>{i(a.id),k({title:a.title,content:a.content,imageFile:null,videoFile:null,existingImage:a.image||"",existingVideo:a.video||"",showEmojiPicker:!1})},children:"Edit"}),(0,b.jsx)("button",{onClick:()=>m(a.id),style:{marginLeft:"10px"},children:"Delete"})]})]})},a.id))})]})}a.s(["default",()=>f])}];

//# sourceMappingURL=_3a697940._.js.map