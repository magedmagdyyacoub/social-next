module.exports=[35112,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactDOM},33354,(a,b,c)=>{"use strict";c._=function(a){return a&&a.__esModule?a:{default:a}}},32245,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"BailoutToCSR",{enumerable:!0,get:function(){return e}});let d=a.r(41997);function e({reason:a,children:b}){throw Object.defineProperty(new d.BailoutToCSRError(a),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}},7773,(a,b,c)=>{"use strict";function d(a){return a.split("/").map(a=>encodeURIComponent(a)).join("/")}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"encodeURIPath",{enumerable:!0,get:function(){return d}})},97458,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"PreloadChunks",{enumerable:!0,get:function(){return h}});let d=a.r(87924),e=a.r(35112),f=a.r(56704),g=a.r(7773);function h({moduleIds:a}){let b=f.workAsyncStorage.getStore();if(void 0===b)return null;let c=[];if(b.reactLoadableManifest&&a){let d=b.reactLoadableManifest;for(let b of a){if(!d[b])continue;let a=d[b].files;c.push(...a)}}return 0===c.length?null:(0,d.jsx)(d.Fragment,{children:c.map(a=>{let c=`${b.assetPrefix}/_next/${(0,g.encodeURIPath)(a)}`;return a.endsWith(".css")?(0,d.jsx)("link",{precedence:"dynamic",href:c,rel:"stylesheet",as:"style",nonce:b.nonce},a):((0,e.preload)(c,{as:"script",fetchPriority:"low",nonce:b.nonce}),null)})})}},69853,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return j}});let d=a.r(87924),e=a.r(72131),f=a.r(32245),g=a.r(97458);function h(a){return{default:a&&"default"in a?a.default:a}}let i={loader:()=>Promise.resolve(h(()=>null)),loading:null,ssr:!0},j=function(a){let b={...i,...a},c=(0,e.lazy)(()=>b.loader().then(h)),j=b.loading;function k(a){let h=j?(0,d.jsx)(j,{isLoading:!0,pastDelay:!0,error:null}):null,i=!b.ssr||!!b.loading,k=i?e.Suspense:e.Fragment,l=b.ssr?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(g.PreloadChunks,{moduleIds:b.modules}),(0,d.jsx)(c,{...a})]}):(0,d.jsx)(f.BailoutToCSR,{reason:"next/dynamic",children:(0,d.jsx)(c,{...a})});return(0,d.jsx)(k,{...i?{fallback:h}:{},children:l})}return k.displayName="LoadableComponent",k}},19721,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return e}});let d=a.r(33354)._(a.r(69853));function e(a,b){let c={};"function"==typeof a&&(c.loader=a);let e={...c,...b};return(0,d.default)({...e,modules:e.loadableGenerated?.modules})}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},1348,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(89644),e=a.i(80415);let f=(0,a.i(19721).default)(async()=>{},{loadableGenerated:{modules:[98888]},ssr:!1});function g(){let{user:a}=(0,c.useContext)(d.AuthContext),{theme:g}=(0,c.useContext)(e.ThemeContext),[h,i]=(0,c.useState)([]),[j,k]=(0,c.useState)({}),[l,m]=(0,c.useState)({}),[n,o]=(0,c.useState)({}),[p,q]=(0,c.useState)({}),[r,s]=(0,c.useState)({}),[t,u]=(0,c.useState)({}),v=async()=>{try{let a=await fetch("/api/posts/random"),b=await a.json();i(b.posts||[])}catch(a){console.error("Fetch random posts error:",a)}};(0,c.useEffect)(()=>{v()},[]);let w=async b=>{if(!a)return alert("Please login first");await fetch(`/api/posts/${b}/interact`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"like"})}),v()},x=async(b,c=null)=>{if(!a)return alert("Please login first");let d=c?l[c]:j[b];d&&""!==d.trim()&&(await fetch(`/api/posts/${b}/interact`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"comment",content:d,parentId:c})}),c?(m(a=>({...a,[c]:""})),q(a=>({...a,[c]:!1}))):k(a=>({...a,[b]:""})),v())},y=async b=>{if(!a)return alert("Please login first");await fetch(`/api/comments/${b}/like`,{method:"POST"}),v()},z=(a,b,c=!1)=>{c?m(c=>({...c,[a]:(c[a]||"")+b.emoji})):k(c=>({...c,[a]:(c[a]||"")+b.emoji}))},A=a=>{s(b=>({...b,[a]:!b[a]})),t[a]||u(b=>({...b,[a]:5}))},B=a=>{u(b=>({...b,[a]:Math.min(b[a]+5,h.flatMap(a=>a.comments).find(b=>b.id===a)?.replies?.length||0)}))},C=(a,c,d)=>{let e=t[d]||5;return c.slice(0,e).map(c=>(0,b.jsxs)("li",{style:{marginLeft:"20px",marginTop:"5px"},children:[(0,b.jsxs)("strong",{style:{color:"dark"===g?"#7abfff":"#0070f3"},children:[c.author?.name||"Unknown",":"]})," ",c.content,(0,b.jsxs)("button",{onClick:()=>y(c.id),style:{marginLeft:"10px",background:"#ff4d4f",color:"#fff",border:"none",borderRadius:"6px",padding:"2px 6px",cursor:"pointer"},children:["â¤ï¸ ",c.likes?.length||0]}),!p[c.id]&&(0,b.jsx)("button",{style:{marginLeft:"10px",background:"dark"===g?"#444":"#0070f3",color:"#fff",border:"none",borderRadius:"6px",padding:"2px 6px",cursor:"pointer"},onClick:()=>q(a=>({...a,[c.id]:!0})),children:"â†©ï¸ Reply"}),p[c.id]&&(0,b.jsxs)("div",{style:{marginTop:"5px"},children:[(0,b.jsx)("textarea",{placeholder:"Write a reply...",value:l[c.id]||"",onChange:a=>m(b=>({...b,[c.id]:a.target.value})),rows:1,style:{width:"80%",borderRadius:"6px",border:"1px solid #ccc",padding:"6px",fontSize:"14px",background:"dark"===g?"#222":"#fff",color:"dark"===g?"#f1f1f1":"#000",resize:"none"}}),(0,b.jsxs)("div",{style:{display:"flex",gap:"5px",marginTop:"4px"},children:[(0,b.jsx)("button",{type:"button",onClick:()=>o(a=>({...a,[c.id]:!a[c.id]})),style:{background:"#eee",border:"none",borderRadius:"6px",padding:"4px 8px",cursor:"pointer"},children:"ðŸ˜Š Emoji"}),n[c.id]&&(0,b.jsx)(f,{onEmojiClick:a=>z(c.id,a,!0)}),(0,b.jsx)("button",{onClick:()=>x(a,c.id),style:{background:"#28a745",color:"#fff",border:"none",borderRadius:"6px",padding:"4px 8px",cursor:"pointer"},children:"âœ… Done"})]})]}),c.replies?.length>0&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:()=>A(c.id),style:{marginTop:"5px",background:"dark"===g?"#333":"#ddd",border:"none",borderRadius:"6px",padding:"4px 8px",cursor:"pointer"},children:r[c.id]?"Hide Replies":`View Replies (${c.replies.length})`}),r[c.id]&&(0,b.jsxs)("ul",{style:{marginTop:"5px"},children:[C(a,c.replies,c.id),t[c.id]<c.replies.length&&(0,b.jsx)("button",{onClick:()=>B(c.id),style:{marginTop:"5px",background:"#0070f3",color:"#fff",border:"none",borderRadius:"6px",padding:"4px 8px",cursor:"pointer"},children:"âž• View More Replies"})]})]})]},c.id))},D={background:"dark"===g?"#1e1e1e":"#fff",boxShadow:"dark"===g?"0 2px 8px rgba(255,255,255,0.05)":"0 2px 8px rgba(0,0,0,0.1)",padding:"20px",marginBottom:"20px",borderRadius:"12px",transition:"transform 0.2s"};return(0,b.jsx)("div",{style:{display:"flex",justifyContent:"center",background:"dark"===g?"#121212":"#f9f9f9",minHeight:"100vh",padding:"20px 0",color:"dark"===g?"#f1f1f1":"#000"},children:0===h.length?(0,b.jsx)("p",{style:{textAlign:"center",fontSize:"18px",color:"#888"},children:"Loading posts..."}):(0,b.jsx)("ul",{style:{listStyle:"none",padding:0,maxWidth:"700px",width:"100%"},children:h.map(a=>(0,b.jsxs)("li",{style:D,children:[(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"10px"},children:[(0,b.jsx)("strong",{style:{color:"dark"===g?"#7abfff":"#0070f3"},children:a.author?.name||"Unknown"}),(0,b.jsx)("small",{style:{color:"#999"},children:new Date(a.createdAt).toLocaleDateString()})]}),(0,b.jsx)("h3",{style:{margin:"10px 0",fontSize:"20px",color:"dark"===g?"#f1f1f1":"#333"},children:a.title}),(0,b.jsx)("p",{style:{marginBottom:"15px",lineHeight:"1.5",color:"dark"===g?"#ddd":"#444"},children:a.content}),a.image&&(0,b.jsx)("img",{src:a.image,style:{maxWidth:"100%",borderRadius:"8px",marginBottom:"15px"}}),a.video&&(0,b.jsx)("video",{controls:!0,style:{maxWidth:"100%",borderRadius:"8px",marginBottom:"15px"},children:(0,b.jsx)("source",{src:a.video})}),(0,b.jsxs)("div",{style:{display:"flex",gap:"15px",marginBottom:"15px"},children:[(0,b.jsx)("button",{onClick:()=>w(a.id),style:{background:"#0070f3",color:"#fff",border:"none",borderRadius:"6px",padding:"6px 12px",cursor:"pointer"},children:"ðŸ‘ Like"}),(0,b.jsxs)("span",{children:[a._count?.likes||0," Likes"]}),(0,b.jsxs)("span",{children:[a._count?.comments||0," Comments"]})]}),(0,b.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,b.jsx)("textarea",{placeholder:"Write a comment...",value:j[a.id]||"",onChange:b=>k(c=>({...c,[a.id]:b.target.value})),rows:1,style:{width:"100%",borderRadius:"6px",border:"1px solid #ccc",padding:"8px",fontSize:"14px",background:"dark"===g?"#222":"#fff",color:"dark"===g?"#f1f1f1":"#000",resize:"none"}}),(0,b.jsxs)("div",{style:{marginTop:"8px",display:"flex",gap:"10px"},children:[(0,b.jsx)("button",{type:"button",onClick:()=>o(b=>({...b,[a.id]:!b[a.id]})),style:{background:"#eee",border:"none",borderRadius:"6px",padding:"6px 12px",cursor:"pointer"},children:"ðŸ˜Š Emoji"}),n[a.id]&&(0,b.jsx)(f,{onEmojiClick:b=>z(a.id,b)}),(0,b.jsx)("button",{onClick:()=>x(a.id),style:{background:"#28a745",color:"#fff",border:"none",borderRadius:"6px",padding:"6px 12px",cursor:"pointer"},children:"ðŸ’¬ Comment"})]})]}),a.comments?.length>0&&(0,b.jsx)("ul",{style:{marginTop:"10px",paddingLeft:"0"},children:a.comments.map(c=>(0,b.jsxs)("li",{style:{background:"dark"===g?"#2a2a2a":"#f9f9f9",padding:"10px",borderRadius:"8px",marginBottom:"10px"},children:[(0,b.jsxs)("strong",{style:{color:"dark"===g?"#7abfff":"#0070f3"},children:[c.author?.name||"Unknown",":"]})," ",c.content,(0,b.jsxs)("div",{style:{marginTop:"5px",display:"flex",gap:"10px"},children:[(0,b.jsxs)("button",{onClick:()=>y(c.id),style:{background:"#ff4d4f",color:"#fff",border:"none",borderRadius:"6px",padding:"4px 10px",cursor:"pointer"},children:["â¤ï¸ ",c.likes?.length||0]}),!p[c.id]&&(0,b.jsx)("button",{style:{background:"dark"===g?"#444":"#0070f3",color:"#fff",border:"none",borderRadius:"6px",padding:"4px 10px",cursor:"pointer"},onClick:()=>q(a=>({...a,[c.id]:!0})),children:"â†©ï¸ Reply"})]}),p[c.id]&&(0,b.jsxs)("div",{style:{marginTop:"8px"},children:[(0,b.jsx)("textarea",{placeholder:"Write a reply...",value:l[c.id]||"",onChange:a=>m(b=>({...b,[c.id]:a.target.value})),rows:1,style:{width:"90%",borderRadius:"6px",border:"1px solid #ccc",padding:"6px",fontSize:"14px",background:"dark"===g?"#222":"#fff",color:"dark"===g?"#f1f1f1":"#000",resize:"none"}}),(0,b.jsxs)("div",{style:{marginTop:"6px",display:"flex",gap:"10px"},children:[(0,b.jsx)("button",{type:"button",onClick:()=>o(a=>({...a,[c.id]:!a[c.id]})),style:{background:"#eee",border:"none",borderRadius:"6px",padding:"4px 10px",cursor:"pointer"},children:"ðŸ˜Š Emoji"}),n[c.id]&&(0,b.jsx)(f,{onEmojiClick:a=>z(c.id,a,!0)}),(0,b.jsx)("button",{onClick:()=>x(a.id,c.id),style:{background:"#28a745",color:"#fff",border:"none",borderRadius:"6px",padding:"4px 10px",cursor:"pointer"},children:"âœ… Done"})]})]}),c.replies?.length>0&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:()=>A(c.id),style:{marginTop:"8px",background:"dark"===g?"#333":"#ddd",border:"none",borderRadius:"6px",padding:"4px 10px",cursor:"pointer"},children:r[c.id]?"Hide Replies":`View Replies (${c.replies.length})`}),r[c.id]&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("ul",{style:{marginTop:"8px"},children:C(a.id,c.replies,c.id)}),t[c.id]<c.replies.length&&(0,b.jsx)("button",{onClick:()=>B(c.id),style:{marginTop:"6px",background:"#0070f3",color:"#fff",border:"none",borderRadius:"6px",padding:"4px 10px",cursor:"pointer"},children:"âž• View More Replies"})]})]})]},c.id))})]},a.id))})})}function h(){let[a,d]=(0,c.useState)([]),[e,f]=(0,c.useState)({}),g=async()=>{try{let a=await fetch("/api/reels/random"),b=await a.json(),c=await Promise.all((b.reels||[]).map(async a=>{let b=await fetch(`/api/reels/${a.id}/interact`),c=await b.json();return{...a,likes:c.likes,comments:c.comments}}));d(c)}catch(a){console.error(a)}};(0,c.useEffect)(()=>{g()},[]);let h=async a=>{try{await fetch(`/api/reels/${a}/interact`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"like"})}),g()}catch(a){console.error(a)}},i=async a=>{if(e[a])try{await fetch(`/api/reels/${a}/interact`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"comment",content:e[a]})}),f({...e,[a]:""}),g()}catch(a){console.error(a)}};return(0,b.jsxs)("div",{style:{marginTop:"20px"},children:[(0,b.jsx)("h2",{children:"Reels"}),0===a.length?(0,b.jsx)("p",{children:"No reels yet"}):(0,b.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"10px"},children:a.map(a=>(0,b.jsxs)("div",{style:{width:"250px",border:"1px solid #ccc",borderRadius:"8px",padding:"10px"},children:[(0,b.jsx)("video",{src:a.video,controls:!0,style:{width:"100%",borderRadius:"6px"}}),a.caption&&(0,b.jsx)("p",{style:{marginTop:"5px"},children:a.caption}),(0,b.jsxs)("button",{onClick:()=>h(a.id),style:{marginTop:"5px",cursor:"pointer",padding:"4px 8px",borderRadius:"4px"},children:["â¤ï¸ ",a.likes?.length||0]}),(0,b.jsx)("div",{style:{marginTop:"10px"},children:a.comments?.length>0&&a.comments.map(a=>(0,b.jsxs)("div",{style:{fontSize:"13px",padding:"2px 0"},children:[(0,b.jsxs)("strong",{children:[a.author?.name||"Unknown",":"]})," ",a.content," ",a.emoji&&(0,b.jsx)("span",{children:a.emoji}),a.replies?.length>0&&a.replies.map(a=>(0,b.jsxs)("div",{style:{fontSize:"12px",paddingLeft:"10px",color:"#555"},children:[(0,b.jsxs)("strong",{children:[a.author?.name||"Unknown",":"]})," ",a.content]},a.id))]},a.id))}),(0,b.jsxs)("div",{style:{marginTop:"10px"},children:[(0,b.jsx)("input",{type:"text",placeholder:"Add a comment...",value:e[a.id]||"",onChange:b=>f({...e,[a.id]:b.target.value}),style:{width:"100%",padding:"5px",borderRadius:"4px",border:"1px solid #ccc"}}),(0,b.jsx)("button",{onClick:()=>i(a.id),style:{marginTop:"5px",cursor:"pointer",padding:"4px 8px",borderRadius:"4px"},children:"Comment"})]})]},a.id))})]})}function i(){let[a,d]=(0,c.useState)("posts");return(0,b.jsx)("main",{style:{padding:"20px",display:"flex",justifyContent:"center"},children:(0,b.jsxs)("div",{style:{maxWidth:"800px",width:"100%",textAlign:"center"},children:[(0,b.jsx)("h1",{style:{fontSize:"32px",fontWeight:"800",background:"linear-gradient(90deg, #0070f3, #7928ca)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",marginBottom:"10px",textShadow:"0px 1px 2px rgba(0,0,0,0.15)"},children:"Welcome to Social App"}),(0,b.jsx)("h2",{style:{marginTop:"20px",fontSize:"20px",color:"#555"},children:"Explore"}),(0,b.jsxs)("div",{style:{display:"flex",gap:"10px",marginTop:"20px",justifyContent:"center"},children:[(0,b.jsx)("button",{onClick:()=>d("posts"),style:{padding:"10px 20px",background:"posts"===a?"#0070f3":"#ddd",color:"posts"===a?"#fff":"#000",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:"600"},children:"Posts"}),(0,b.jsx)("button",{onClick:()=>d("reels"),style:{padding:"10px 20px",background:"reels"===a?"#0070f3":"#ddd",color:"reels"===a?"#fff":"#000",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:"600"},children:"Reels"})]}),(0,b.jsxs)("div",{style:{marginTop:"30px"},children:["posts"===a&&(0,b.jsx)(g,{}),"reels"===a&&(0,b.jsx)(h,{})]})]})})}a.s(["default",()=>i],1348)}];

//# sourceMappingURL=_8e8ee4e1._.js.map