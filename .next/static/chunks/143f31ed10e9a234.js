(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,67585,(e,r,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return i}});let n=e.r(32061);function i({reason:e,children:r}){if("undefined"==typeof window)throw Object.defineProperty(new n.BailoutToCSRError(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return r}},9885,(e,r,t)=>{"use strict";function n(e){return e.split("/").map(e=>encodeURIComponent(e)).join("/")}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"encodeURIPath",{enumerable:!0,get:function(){return n}})},52157,(e,r,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return s}});let n=e.r(43476),i=e.r(74080),o=e.r(63599),d=e.r(9885);function s({moduleIds:e}){if("undefined"!=typeof window)return null;let r=o.workAsyncStorage.getStore();if(void 0===r)return null;let t=[];if(r.reactLoadableManifest&&e){let n=r.reactLoadableManifest;for(let r of e){if(!n[r])continue;let e=n[r].files;t.push(...e)}}return 0===t.length?null:(0,n.jsx)(n.Fragment,{children:t.map(e=>{let t=`${r.assetPrefix}/_next/${(0,d.encodeURIPath)(e)}`;return e.endsWith(".css")?(0,n.jsx)("link",{precedence:"dynamic",href:t,rel:"stylesheet",as:"style",nonce:r.nonce},e):((0,i.preload)(t,{as:"script",fetchPriority:"low",nonce:r.nonce}),null)})})}},69093,(e,r,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a}});let n=e.r(43476),i=e.r(71645),o=e.r(67585),d=e.r(52157);function s(e){return{default:e&&"default"in e?e.default:e}}let l={loader:()=>Promise.resolve(s(()=>null)),loading:null,ssr:!0},a=function(e){let r={...l,...e},t=(0,i.lazy)(()=>r.loader().then(s)),a=r.loading;function p(e){let s=a?(0,n.jsx)(a,{isLoading:!0,pastDelay:!0,error:null}):null,l=!r.ssr||!!r.loading,p=l?i.Suspense:i.Fragment,c=r.ssr?(0,n.jsxs)(n.Fragment,{children:["undefined"==typeof window?(0,n.jsx)(d.PreloadChunks,{moduleIds:r.modules}):null,(0,n.jsx)(t,{...e})]}):(0,n.jsx)(o.BailoutToCSR,{reason:"next/dynamic",children:(0,n.jsx)(t,{...e})});return(0,n.jsx)(p,{...l?{fallback:s}:{},children:c})}return p.displayName="LoadableComponent",p}},70703,(e,r,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i}});let n=e.r(55682)._(e.r(69093));function i(e,r){let t={};"function"==typeof e&&(t.loader=e);let i={...t,...r};return(0,n.default)({...i,modules:i.loadableGenerated?.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),r.exports=t.default)},29615,e=>{"use strict";var r=e.i(43476),t=e.i(71645),n=e.i(91137),i=e.i(43484);let o=(0,e.i(70703).default)(()=>e.A(61258),{loadableGenerated:{modules:[98888]},ssr:!1});function d(){let{user:e}=(0,t.useContext)(n.AuthContext),{theme:d}=(0,t.useContext)(i.ThemeContext),[s,l]=(0,t.useState)([]),[a,p]=(0,t.useState)({}),[c,x]=(0,t.useState)({}),[u,f]=(0,t.useState)({}),[g,h]=(0,t.useState)({}),[m,y]=(0,t.useState)({}),[b,j]=(0,t.useState)({}),k=async()=>{try{let e=await fetch("/api/posts/random"),r=await e.json();l(r.posts||[])}catch(e){console.error("Fetch random posts error:",e)}};(0,t.useEffect)(()=>{k()},[]);let C=async r=>{if(!e)return alert("Please login first");await fetch(`/api/posts/${r}/interact`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"like"})}),k()},R=async(r,t=null)=>{if(!e)return alert("Please login first");let n=t?c[t]:a[r];n&&""!==n.trim()&&(await fetch(`/api/posts/${r}/interact`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"comment",content:n,parentId:t})}),t?(x(e=>({...e,[t]:""})),h(e=>({...e,[t]:!1}))):p(e=>({...e,[r]:""})),k())},v=async r=>{if(!e)return alert("Please login first");await fetch(`/api/comments/${r}/like`,{method:"POST"}),k()},w=(e,r,t=!1)=>{t?x(t=>({...t,[e]:(t[e]||"")+r.emoji})):p(t=>({...t,[e]:(t[e]||"")+r.emoji}))},T=e=>{y(r=>({...r,[e]:!r[e]})),b[e]||j(r=>({...r,[e]:5}))},S=e=>{j(r=>({...r,[e]:Math.min(r[e]+5,s.flatMap(e=>e.comments).find(r=>r.id===e)?.replies?.length||0)}))},P=(e,t,n)=>{let i=b[n]||5;return t.slice(0,i).map(t=>(0,r.jsxs)("li",{style:{marginLeft:"20px",marginTop:"5px"},children:[(0,r.jsxs)("strong",{style:{color:"dark"===d?"#7abfff":"#0070f3"},children:[t.author?.name||"Unknown",":"]})," ",t.content,(0,r.jsxs)("button",{onClick:()=>v(t.id),style:{marginLeft:"10px",background:"#ff4d4f",color:"#fff",border:"none",borderRadius:"6px",padding:"2px 6px",cursor:"pointer"},children:["â¤ï¸ ",t.likes?.length||0]}),!g[t.id]&&(0,r.jsx)("button",{style:{marginLeft:"10px",background:"dark"===d?"#444":"#0070f3",color:"#fff",border:"none",borderRadius:"6px",padding:"2px 6px",cursor:"pointer"},onClick:()=>h(e=>({...e,[t.id]:!0})),children:"â†©ï¸ Reply"}),g[t.id]&&(0,r.jsxs)("div",{style:{marginTop:"5px"},children:[(0,r.jsx)("textarea",{placeholder:"Write a reply...",value:c[t.id]||"",onChange:e=>x(r=>({...r,[t.id]:e.target.value})),rows:1,style:{width:"80%",borderRadius:"6px",border:"1px solid #ccc",padding:"6px",fontSize:"14px",background:"dark"===d?"#222":"#fff",color:"dark"===d?"#f1f1f1":"#000",resize:"none"}}),(0,r.jsxs)("div",{style:{display:"flex",gap:"5px",marginTop:"4px"},children:[(0,r.jsx)("button",{type:"button",onClick:()=>f(e=>({...e,[t.id]:!e[t.id]})),style:{background:"#eee",border:"none",borderRadius:"6px",padding:"4px 8px",cursor:"pointer"},children:"ðŸ˜Š Emoji"}),u[t.id]&&(0,r.jsx)(o,{onEmojiClick:e=>w(t.id,e,!0)}),(0,r.jsx)("button",{onClick:()=>R(e,t.id),style:{background:"#28a745",color:"#fff",border:"none",borderRadius:"6px",padding:"4px 8px",cursor:"pointer"},children:"âœ… Done"})]})]}),t.replies?.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:()=>T(t.id),style:{marginTop:"5px",background:"dark"===d?"#333":"#ddd",border:"none",borderRadius:"6px",padding:"4px 8px",cursor:"pointer"},children:m[t.id]?"Hide Replies":`View Replies (${t.replies.length})`}),m[t.id]&&(0,r.jsxs)("ul",{style:{marginTop:"5px"},children:[P(e,t.replies,t.id),b[t.id]<t.replies.length&&(0,r.jsx)("button",{onClick:()=>S(t.id),style:{marginTop:"5px",background:"#0070f3",color:"#fff",border:"none",borderRadius:"6px",padding:"4px 8px",cursor:"pointer"},children:"âž• View More Replies"})]})]})]},t.id))},O={background:"dark"===d?"#1e1e1e":"#fff",boxShadow:"dark"===d?"0 2px 8px rgba(255,255,255,0.05)":"0 2px 8px rgba(0,0,0,0.1)",padding:"20px",marginBottom:"20px",borderRadius:"12px",transition:"transform 0.2s"};return(0,r.jsx)("div",{style:{display:"flex",justifyContent:"center",background:"dark"===d?"#121212":"#f9f9f9",minHeight:"100vh",padding:"20px 0",color:"dark"===d?"#f1f1f1":"#000"},children:0===s.length?(0,r.jsx)("p",{style:{textAlign:"center",fontSize:"18px",color:"#888"},children:"Loading posts..."}):(0,r.jsx)("ul",{style:{listStyle:"none",padding:0,maxWidth:"700px",width:"100%"},children:s.map(e=>(0,r.jsxs)("li",{style:O,children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"10px"},children:[(0,r.jsx)("strong",{style:{color:"dark"===d?"#7abfff":"#0070f3"},children:e.author?.name||"Unknown"}),(0,r.jsx)("small",{style:{color:"#999"},children:new Date(e.createdAt).toLocaleDateString()})]}),(0,r.jsx)("h3",{style:{margin:"10px 0",fontSize:"20px",color:"dark"===d?"#f1f1f1":"#333"},children:e.title}),(0,r.jsx)("p",{style:{marginBottom:"15px",lineHeight:"1.5",color:"dark"===d?"#ddd":"#444"},children:e.content}),e.image&&(0,r.jsx)("img",{src:e.image,style:{maxWidth:"100%",borderRadius:"8px",marginBottom:"15px"}}),e.video&&(0,r.jsx)("video",{controls:!0,style:{maxWidth:"100%",borderRadius:"8px",marginBottom:"15px"},children:(0,r.jsx)("source",{src:e.video})}),(0,r.jsxs)("div",{style:{display:"flex",gap:"15px",marginBottom:"15px"},children:[(0,r.jsx)("button",{onClick:()=>C(e.id),style:{background:"#0070f3",color:"#fff",border:"none",borderRadius:"6px",padding:"6px 12px",cursor:"pointer"},children:"ðŸ‘ Like"}),(0,r.jsxs)("span",{children:[e._count?.likes||0," Likes"]}),(0,r.jsxs)("span",{children:[e._count?.comments||0," Comments"]})]}),(0,r.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,r.jsx)("textarea",{placeholder:"Write a comment...",value:a[e.id]||"",onChange:r=>p(t=>({...t,[e.id]:r.target.value})),rows:1,style:{width:"100%",borderRadius:"6px",border:"1px solid #ccc",padding:"8px",fontSize:"14px",background:"dark"===d?"#222":"#fff",color:"dark"===d?"#f1f1f1":"#000",resize:"none"}}),(0,r.jsxs)("div",{style:{marginTop:"8px",display:"flex",gap:"10px"},children:[(0,r.jsx)("button",{type:"button",onClick:()=>f(r=>({...r,[e.id]:!r[e.id]})),style:{background:"#eee",border:"none",borderRadius:"6px",padding:"6px 12px",cursor:"pointer"},children:"ðŸ˜Š Emoji"}),u[e.id]&&(0,r.jsx)(o,{onEmojiClick:r=>w(e.id,r)}),(0,r.jsx)("button",{onClick:()=>R(e.id),style:{background:"#28a745",color:"#fff",border:"none",borderRadius:"6px",padding:"6px 12px",cursor:"pointer"},children:"ðŸ’¬ Comment"})]})]}),e.comments?.length>0&&(0,r.jsx)("ul",{style:{marginTop:"10px",paddingLeft:"0"},children:e.comments.map(t=>(0,r.jsxs)("li",{style:{background:"dark"===d?"#2a2a2a":"#f9f9f9",padding:"10px",borderRadius:"8px",marginBottom:"10px"},children:[(0,r.jsxs)("strong",{style:{color:"dark"===d?"#7abfff":"#0070f3"},children:[t.author?.name||"Unknown",":"]})," ",t.content,(0,r.jsxs)("div",{style:{marginTop:"5px",display:"flex",gap:"10px"},children:[(0,r.jsxs)("button",{onClick:()=>v(t.id),style:{background:"#ff4d4f",color:"#fff",border:"none",borderRadius:"6px",padding:"4px 10px",cursor:"pointer"},children:["â¤ï¸ ",t.likes?.length||0]}),!g[t.id]&&(0,r.jsx)("button",{style:{background:"dark"===d?"#444":"#0070f3",color:"#fff",border:"none",borderRadius:"6px",padding:"4px 10px",cursor:"pointer"},onClick:()=>h(e=>({...e,[t.id]:!0})),children:"â†©ï¸ Reply"})]}),g[t.id]&&(0,r.jsxs)("div",{style:{marginTop:"8px"},children:[(0,r.jsx)("textarea",{placeholder:"Write a reply...",value:c[t.id]||"",onChange:e=>x(r=>({...r,[t.id]:e.target.value})),rows:1,style:{width:"90%",borderRadius:"6px",border:"1px solid #ccc",padding:"6px",fontSize:"14px",background:"dark"===d?"#222":"#fff",color:"dark"===d?"#f1f1f1":"#000",resize:"none"}}),(0,r.jsxs)("div",{style:{marginTop:"6px",display:"flex",gap:"10px"},children:[(0,r.jsx)("button",{type:"button",onClick:()=>f(e=>({...e,[t.id]:!e[t.id]})),style:{background:"#eee",border:"none",borderRadius:"6px",padding:"4px 10px",cursor:"pointer"},children:"ðŸ˜Š Emoji"}),u[t.id]&&(0,r.jsx)(o,{onEmojiClick:e=>w(t.id,e,!0)}),(0,r.jsx)("button",{onClick:()=>R(e.id,t.id),style:{background:"#28a745",color:"#fff",border:"none",borderRadius:"6px",padding:"4px 10px",cursor:"pointer"},children:"âœ… Done"})]})]}),t.replies?.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:()=>T(t.id),style:{marginTop:"8px",background:"dark"===d?"#333":"#ddd",border:"none",borderRadius:"6px",padding:"4px 10px",cursor:"pointer"},children:m[t.id]?"Hide Replies":`View Replies (${t.replies.length})`}),m[t.id]&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("ul",{style:{marginTop:"8px"},children:P(e.id,t.replies,t.id)}),b[t.id]<t.replies.length&&(0,r.jsx)("button",{onClick:()=>S(t.id),style:{marginTop:"6px",background:"#0070f3",color:"#fff",border:"none",borderRadius:"6px",padding:"4px 10px",cursor:"pointer"},children:"âž• View More Replies"})]})]})]},t.id))})]},e.id))})})}function s(){let[e,n]=(0,t.useState)([]),[i,o]=(0,t.useState)({}),d=async()=>{try{let e=await fetch("/api/reels/random"),r=await e.json(),t=await Promise.all((r.reels||[]).map(async e=>{let r=await fetch(`/api/reels/${e.id}/interact`),t=await r.json();return{...e,likes:t.likes,comments:t.comments}}));n(t)}catch(e){console.error(e)}};(0,t.useEffect)(()=>{d()},[]);let s=async e=>{try{await fetch(`/api/reels/${e}/interact`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"like"})}),d()}catch(e){console.error(e)}},l=async e=>{if(i[e])try{await fetch(`/api/reels/${e}/interact`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"comment",content:i[e]})}),o({...i,[e]:""}),d()}catch(e){console.error(e)}};return(0,r.jsxs)("div",{style:{marginTop:"20px"},children:[(0,r.jsx)("h2",{children:"Reels"}),0===e.length?(0,r.jsx)("p",{children:"No reels yet"}):(0,r.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"10px"},children:e.map(e=>(0,r.jsxs)("div",{style:{width:"250px",border:"1px solid #ccc",borderRadius:"8px",padding:"10px"},children:[(0,r.jsx)("video",{src:e.video,controls:!0,style:{width:"100%",borderRadius:"6px"}}),e.caption&&(0,r.jsx)("p",{style:{marginTop:"5px"},children:e.caption}),(0,r.jsxs)("button",{onClick:()=>s(e.id),style:{marginTop:"5px",cursor:"pointer",padding:"4px 8px",borderRadius:"4px"},children:["â¤ï¸ ",e.likes?.length||0]}),(0,r.jsx)("div",{style:{marginTop:"10px"},children:e.comments?.length>0&&e.comments.map(e=>(0,r.jsxs)("div",{style:{fontSize:"13px",padding:"2px 0"},children:[(0,r.jsxs)("strong",{children:[e.author?.name||"Unknown",":"]})," ",e.content," ",e.emoji&&(0,r.jsx)("span",{children:e.emoji}),e.replies?.length>0&&e.replies.map(e=>(0,r.jsxs)("div",{style:{fontSize:"12px",paddingLeft:"10px",color:"#555"},children:[(0,r.jsxs)("strong",{children:[e.author?.name||"Unknown",":"]})," ",e.content]},e.id))]},e.id))}),(0,r.jsxs)("div",{style:{marginTop:"10px"},children:[(0,r.jsx)("input",{type:"text",placeholder:"Add a comment...",value:i[e.id]||"",onChange:r=>o({...i,[e.id]:r.target.value}),style:{width:"100%",padding:"5px",borderRadius:"4px",border:"1px solid #ccc"}}),(0,r.jsx)("button",{onClick:()=>l(e.id),style:{marginTop:"5px",cursor:"pointer",padding:"4px 8px",borderRadius:"4px"},children:"Comment"})]})]},e.id))})]})}function l(){let[e,n]=(0,t.useState)("posts");return(0,r.jsx)("main",{style:{padding:"20px",display:"flex",justifyContent:"center"},children:(0,r.jsxs)("div",{style:{maxWidth:"800px",width:"100%",textAlign:"center"},children:[(0,r.jsx)("h1",{style:{fontSize:"32px",fontWeight:"800",background:"linear-gradient(90deg, #0070f3, #7928ca)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",marginBottom:"10px",textShadow:"0px 1px 2px rgba(0,0,0,0.15)"},children:"Welcome to Social App"}),(0,r.jsx)("h2",{style:{marginTop:"20px",fontSize:"20px",color:"#555"},children:"Explore"}),(0,r.jsxs)("div",{style:{display:"flex",gap:"10px",marginTop:"20px",justifyContent:"center"},children:[(0,r.jsx)("button",{onClick:()=>n("posts"),style:{padding:"10px 20px",background:"posts"===e?"#0070f3":"#ddd",color:"posts"===e?"#fff":"#000",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:"600"},children:"Posts"}),(0,r.jsx)("button",{onClick:()=>n("reels"),style:{padding:"10px 20px",background:"reels"===e?"#0070f3":"#ddd",color:"reels"===e?"#fff":"#000",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:"600"},children:"Reels"})]}),(0,r.jsxs)("div",{style:{marginTop:"30px"},children:["posts"===e&&(0,r.jsx)(d,{}),"reels"===e&&(0,r.jsx)(s,{})]})]})})}e.s(["default",()=>l],29615)},61258,e=>{e.v(r=>Promise.all(["static/chunks/a098efa86e98334e.js"].map(r=>e.l(r))).then(()=>r(98888)))}]);