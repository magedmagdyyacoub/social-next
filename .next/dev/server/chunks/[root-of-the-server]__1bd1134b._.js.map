{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Barakat/Desktop/social-next/lib/prisma.js"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\";\r\n\r\nconst globalForPrisma = globalThis;\r\n\r\nexport const prisma =\r\n  globalForPrisma.prisma ||\r\n  new PrismaClient();\r\n\r\nif (process.env.NODE_ENV !== \"production\") globalForPrisma.prisma = prisma;\r\n\r\nexport default prisma;\r\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,MAAM,kBAAkB;AAEjB,MAAM,SACX,gBAAgB,MAAM,IACtB,IAAI,6IAAY;AAElB,wCAA2C,gBAAgB,MAAM,GAAG;uCAErD"}},
    {"offset": {"line": 68, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Barakat/Desktop/social-next/lib/auth.js"],"sourcesContent":["import { cookies } from \"next/headers\";\r\nimport prisma from \"./prisma\";\r\n\r\n// هذه الدالة ترجع بيانات المستخدم من الـ cookie\r\nexport async function getUserFromCookie() {\r\n  const cookieStore = await cookies();\r\n  const token = cookieStore.get(\"token\")?.value;\r\n\r\n  if (!token) return null;\r\n\r\n  const user = await prisma.user.findUnique({\r\n    where: { id: token },\r\n  });\r\n\r\n  return user;\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAGO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,4IAAO;IACjC,MAAM,QAAQ,YAAY,GAAG,CAAC,UAAU;IAExC,IAAI,CAAC,OAAO,OAAO;IAEnB,MAAM,OAAO,MAAM,0HAAM,CAAC,IAAI,CAAC,UAAU,CAAC;QACxC,OAAO;YAAE,IAAI;QAAM;IACrB;IAEA,OAAO;AACT"}},
    {"offset": {"line": 91, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Barakat/Desktop/social-next/app/api/friends/list/route.js"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\nimport prisma from \"@/lib/prisma\";\r\nimport { getServerSession } from \"next-auth\";\r\nimport { authOptions } from \"@/lib/auth\"; // تعديل حسب إعدادات next-auth عندك\r\n\r\nexport async function GET(req) {\r\n  try {\r\n    // جلب الجلسة الحالية (المستخدم المسجل الدخول)\r\n    const session = await getServerSession(authOptions);\r\n    if (!session?.user?.email) {\r\n      return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 });\r\n    }\r\n\r\n    // جلب بيانات المستخدم من البريد الإلكتروني\r\n    const currentUser = await prisma.user.findUnique({\r\n      where: { email: session.user.email },\r\n    });\r\n\r\n    if (!currentUser) {\r\n      return NextResponse.json({ error: \"User not found\" }, { status: 404 });\r\n    }\r\n\r\n    // جلب قائمة الأصدقاء\r\n    const friends = await prisma.friend.findMany({\r\n      where: {\r\n        OR: [\r\n          { userId: currentUser.id },\r\n          { friendId: currentUser.id }\r\n        ]\r\n      },\r\n      include: {\r\n        user: true,\r\n        friend: true\r\n      }\r\n    });\r\n\r\n    // تنسيق الرد بحيث يظهر اسم كل صديق\r\n    const formattedFriends = friends.map(f => {\r\n      // إذا كان currentUser هو userId، الصديق هو friend\r\n      if (f.userId === currentUser.id) return { id: f.id, friend: f.friend };\r\n      else return { id: f.id, friend: f.user };\r\n    });\r\n\r\n    return NextResponse.json({ friends: formattedFriends });\r\n  } catch (err) {\r\n    console.error(err);\r\n    return NextResponse.json({ error: \"Failed to fetch friends\" }, { status: 500 });\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;;;;AAEA,+LAA0C,mCAAmC;;;;;AAEtE,eAAe,IAAI,GAAG;IAC3B,IAAI;QACF,8CAA8C;QAC9C,MAAM,UAAU,MAAM,iBAAiB,4HAAW;QAClD,IAAI,CAAC,SAAS,MAAM,OAAO;YACzB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAe,GAAG;gBAAE,QAAQ;YAAI;QACpE;QAEA,2CAA2C;QAC3C,MAAM,cAAc,MAAM,0HAAM,CAAC,IAAI,CAAC,UAAU,CAAC;YAC/C,OAAO;gBAAE,OAAO,QAAQ,IAAI,CAAC,KAAK;YAAC;QACrC;QAEA,IAAI,CAAC,aAAa;YAChB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAiB,GAAG;gBAAE,QAAQ;YAAI;QACtE;QAEA,qBAAqB;QACrB,MAAM,UAAU,MAAM,0HAAM,CAAC,MAAM,CAAC,QAAQ,CAAC;YAC3C,OAAO;gBACL,IAAI;oBACF;wBAAE,QAAQ,YAAY,EAAE;oBAAC;oBACzB;wBAAE,UAAU,YAAY,EAAE;oBAAC;iBAC5B;YACH;YACA,SAAS;gBACP,MAAM;gBACN,QAAQ;YACV;QACF;QAEA,mCAAmC;QACnC,MAAM,mBAAmB,QAAQ,GAAG,CAAC,CAAA;YACnC,kDAAkD;YAClD,IAAI,EAAE,MAAM,KAAK,YAAY,EAAE,EAAE,OAAO;gBAAE,IAAI,EAAE,EAAE;gBAAE,QAAQ,EAAE,MAAM;YAAC;iBAChE,OAAO;gBAAE,IAAI,EAAE,EAAE;gBAAE,QAAQ,EAAE,IAAI;YAAC;QACzC;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAiB;IACvD,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC;QACd,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA0B,GAAG;YAAE,QAAQ;QAAI;IAC/E;AACF"}}]
}