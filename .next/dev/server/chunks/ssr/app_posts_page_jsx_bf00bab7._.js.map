{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Barakat/Desktop/social-next/app/posts/page.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState, useContext } from \"react\";\r\nimport { AuthContext } from \"../../context/AuthContext\";\r\n\r\nexport default function PostsPage() {\r\n  const { user } = useContext(AuthContext);\r\n  const [posts, setPosts] = useState([]);\r\n  const [editingPostId, setEditingPostId] = useState(null);\r\n  const [editData, setEditData] = useState({ title: \"\", content: \"\" });\r\n\r\n  const fetchPosts = async () => {\r\n    const res = await fetch(\"/api/posts/mine\");\r\n    const data = await res.json();\r\n    setPosts(data.posts || []);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!user) return;\r\n    fetchPosts();\r\n  }, [user]);\r\n\r\n  if (!user) return <p>Loading...</p>;\r\n\r\n  // handle delete\r\n  const handleDelete = async (id) => {\r\n    if (!confirm(\"Are you sure you want to delete this post?\")) return;\r\n    await fetch(`/api/posts/${id}`, { method: \"DELETE\" });\r\n    fetchPosts();\r\n  };\r\n\r\n  // handle edit save\r\n  const handleEditSave = async (id) => {\r\n    await fetch(`/api/posts/${id}`, {\r\n      method: \"PUT\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify(editData),\r\n    });\r\n    setEditingPostId(null);\r\n    setEditData({ title: \"\", content: \"\" });\r\n    fetchPosts();\r\n  };\r\n\r\n  return (\r\n    <div style={{ padding: \"30px\" }}>\r\n      <h1>My Posts</h1>\r\n\r\n      {posts.length === 0 ? (\r\n        <p>No posts yet.</p>\r\n      ) : (\r\n        <ul style={{ marginTop: \"20px\" }}>\r\n          {posts.map((post) => (\r\n            <li key={post.id} style={{ marginBottom: \"20px\", padding: \"10px\", border: \"1px solid #ccc\", borderRadius: \"6px\" }}>\r\n              {editingPostId === post.id ? (\r\n                <div>\r\n                  <input\r\n                    value={editData.title}\r\n                    onChange={(e) => setEditData({ ...editData, title: e.target.value })}\r\n                    placeholder=\"Title\"\r\n                    style={{ width: \"100%\", marginBottom: \"5px\" }}\r\n                  />\r\n                  <textarea\r\n                    value={editData.content}\r\n                    onChange={(e) => setEditData({ ...editData, content: e.target.value })}\r\n                    placeholder=\"Content\"\r\n                    style={{ width: \"100%\", marginBottom: \"5px\" }}\r\n                  />\r\n                  <button onClick={() => handleEditSave(post.id)}>Save</button>\r\n                  <button onClick={() => setEditingPostId(null)} style={{ marginLeft: \"10px\" }}>Cancel</button>\r\n                </div>\r\n              ) : (\r\n                <div>\r\n                  <h3>{post.title}</h3>\r\n                  <p>{post.content}</p>\r\n                  <small>{new Date(post.createdAt).toLocaleDateString()}</small>\r\n                  <div style={{ marginTop: \"5px\" }}>\r\n                    <button onClick={() => {\r\n                      setEditingPostId(post.id);\r\n                      setEditData({ title: post.title, content: post.content });\r\n                    }}>Edit</button>\r\n                    <button onClick={() => handleDelete(post.id)} style={{ marginLeft: \"10px\" }}>Delete</button>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}